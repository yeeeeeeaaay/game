<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Шашки с Капибарой</title>
<style>
  body {
    margin: 0;
    font-family: Comic Sans MS, Arial, sans-serif;
    background: linear-gradient(135deg, #fff7e6 0%, #ffd966 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    user-select: none;
    text-align: center;
  }
  h2 { color:#6b4f4f; }
  #capybara { width: 150px; margin: 10px; }
  #board { display: grid; grid-template: repeat(8, 60px) / repeat(8, 60px); border: 5px solid #6b4f4f; }
  .cell { width:60px; height:60px; }
  .black { background:#6b4f4f; }
  .white { background:#fff; }
  .piece { width: 50px; height:50px; border-radius:50%; margin:5px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
  .player { background:white; }
  .bot { background:black; }
  .selected { outline:3px solid yellow; }
</style>
</head>
<body>

<img id="capybara" src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" alt="Капибара" />

<h2>Играем в шашки</h2>
<div id="board"></div>

<script>
const board = document.getElementById("board");
const SIZE = 8;
let selected = null;
let cells = [];
let pieces = [];

// Создаем доску и шашки
for(let r=0;r<SIZE;r++){
  cells[r]=[];
  pieces[r]=[];
  for(let c=0;c<SIZE;c++){
    const cell = document.createElement("div");
    cell.classList.add("cell");
    if((r+c)%2==1) cell.classList.add("black"); else cell.classList.add("white");
    board.appendChild(cell);
    cells[r][c]=cell;
    let piece=null;
    if(cell.classList.contains("black") && r<3){
      piece = createPiece("bot"); cell.appendChild(piece);
    } else if(cell.classList.contains("black") && r>4){
      piece = createPiece("player"); cell.appendChild(piece);
    }
    pieces[r][c]=piece;
  }
}

// Создаем элемент шашки
function createPiece(type){
  const p = document.createElement("div");
  p.classList.add("piece", type);
  p.dataset.type = type;
  p.onclick = () => selectPiece(p);
  return p;
}

// Выбор и ход игрока
function selectPiece(p){
  if(p.dataset.type!="player") return;
  if(selected) selected.classList.remove("selected");
  selected=p;
  selected.classList.add("selected");
  highlightMoves();
}

// Подсветка возможных ходов
function highlightMoves(){
  clearHighlights();
  const pos = findPiece(selected);
  const dirs = [[-1,-1],[-1,1]]; // игрок вверх
  for(let [dr,dc] of dirs){
    const nr=pos.r+dr, nc=pos.c+dc;
    if(nr>=0 && nr<SIZE && nc>=0 && nc<SIZE){
      if(!pieces[nr][nc]){
        cells[nr][nc].classList.add("highlight");
        cells[nr][nc].onclick = ()=>movePiece(selected,nr,nc);
      } else if(pieces[nr][nc] && pieces[nr][nc].dataset.type=="bot"){
        const jumpR = nr+dr, jumpC = nc+dc;
        if(jumpR>=0 && jumpR<SIZE && jumpC>=0 && jumpC<SIZE && !pieces[jumpR][jumpC]){
          cells[jumpR][jumpC].classList.add("highlight");
          cells[jumpR][jumpC].onclick = ()=>movePiece(selected,jumpR,jumpC,[nr,nc]);
        }
      }
    }
  }
}

// Очистка подсветки
function clearHighlights(){
  for(let r=0;r<SIZE;r++)
    for(let c=0;c<SIZE;c++){
      cells[r][c].classList.remove("highlight");
      cells[r][c].onclick = null;
    }
}

// Найти позицию шашки
function findPiece(p){
  for(let r=0;r<SIZE;r++)
    for(let c=0;c<SIZE;c++)
      if(pieces[r][c]===p) return {r,c};
}

// Ход шашки
function movePiece(p, r, c, jump=null){
  const pos=findPiece(p);
  pieces[pos.r][pos.c]=null;
  cells[pos.r][pos.c].removeChild(p);
  pieces[r][c]=p;
  cells[r][c].appendChild(p);
  selected.classList.remove("selected");
  selected=null;
  clearHighlights();
  if(jump){
    const [jr,jc]=jump;
    pieces[jr][jc].parentNode.removeChild(pieces[jr][jc]);
    pieces[jr][jc]=null;
  }
  setTimeout(botMove,300);
}

// Логика хода бота (случайная из доступных)
function botMove(){
  let moves=[];
  for(let r=0;r<SIZE;r++)
    for(let c=0;c<SIZE;c++){
      const p=pieces[r][c];
      if(p && p.dataset.type=="bot"){
        const dirs=[[1,-1],[1,1]];
        for(let [dr,dc] of dirs){
          const nr=r+dr,nc=c+dc;
          if(nr>=0 && nr<SIZE && nc>=0 && nc<SIZE && !pieces[nr][nc]) moves.push({from:[r,c],to:[nr,nc]});
          else if(nr>=0 && nr<SIZE && nc>=0 && nc<SIZE && pieces[nr][nc] && pieces[nr][nc].dataset.type=="player"){
            const jumpR = nr+dr, jumpC=nc+dc;
            if(jumpR>=0 && jumpR<SIZE && jumpC>=0 && jumpC<SIZE && !pieces[jumpR][jumpC])
              moves.push({from:[r,c],to:[jumpR,jumpC],jump:[nr,nc]});
          }
        }
      }
    }
  if(moves.length==0) return;
  const m = moves[Math.floor(Math.random()*moves.length)];
  const p = pieces[m.from[0]][m.from[1]];
  pieces[m.from[0]][m.from[1]]=null;
  cells[m.from[0]][m.from[1]].removeChild(p);
  pieces[m.to[0]][m.to[1]]=p;
  cells[m.to[0]][m.to[1]].appendChild(p);
  if(m.jump){
    const [jr,jc]=m.jump;
    pieces[jr][jc].parentNode.removeChild(pieces[jr][jc]);
    pieces[jr][jc]=null;
  }
}
</script>
</body>
</html>
