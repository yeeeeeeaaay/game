<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –ª–∞–±–∏—Ä–∏–Ω—Ç</title>
<style>
  /* –û–±—â–∏–π —Å—Ç–∏–ª—å */
  body {
    margin: 0;
    font-family: Comic Sans MS, Arial, sans-serif;
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    overflow: hidden;
    user-select: none;
  }
  .container {
    width: 520px;
    margin: 20px auto;
    background: rgba(255 255 255 / 0.9);
    border-radius: 20px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 0 15px #f9a825aa;
    position: relative;
    z-index: 10;
  }
  h2 {
    margin-top: 0;
    color: #6b4f4f;
  }
  button {
    font-size: 18px;
    padding: 12px 30px;
    margin-top: 15px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #6b4f4f;
    color: white;
    transition: background 0.3s;
  }
  button:hover {
    background: #a47171;
  }
  input {
    font-size: 18px;
    padding: 10px;
    border-radius: 12px;
    border: 2px solid #6b4f4f;
    width: 60%;
  }

  /* –õ–∞–±–∏—Ä–∏–Ω—Ç */
  #maze {
    position: relative;
    width: 500px;
    height: 500px;
    margin: 20px auto 0;
    background: #a3d9a5; /* —Ç—Ä–∞–≤–∞ */
    border: 5px solid #6b4f4f;
    border-radius: 15px;
    box-shadow: inset 0 0 15px #558855aa;
  }
  .wall {
    position: absolute;
    background: #6b4f4f;
    border-radius: 6px;
  }

  /* –¶–µ–ª—å - –¥–≤–µ—Ä—å */
  #goal {
    position: absolute;
    width: 60px;
    height: 90px;
    background: linear-gradient(45deg, #ffefba, #ffffff);
    border: 3px solid #6b4f4f;
    border-radius: 8px;
    box-shadow: 0 0 15px #ffd700aa;
  }
  #goal::before {
    content: "üö™";
    font-size: 50px;
    display: block;
    text-align: center;
    line-height: 90px;
  }

  /* –ò–≥—Ä–æ–∫ - –∫–∞–ø–∏–±–∞—Ä–∞ */
  #player {
    position: absolute;
    width: 60px;
    height: 60px;
    user-select: none;
    cursor: default;
    transition: left 0.1s ease, top 0.1s ease;
  }

  /* –ú—ã–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä–∏ */
  .bubble {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    box-shadow: 0 0 15px 5px rgba(255 255 255 / 0.5);
    animation: floatUp linear infinite;
  }
  @keyframes floatUp {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0.7;
    }
    100% {
      transform: translateY(-700px) scale(1.6);
      opacity: 0;
    }
  }
</style>
</head>
<body>

<div class="container" id="colorScreen">
  <h2>ü¶´ –ú–æ–π –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç?</h2>
  <input id="colorInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç" autocomplete="off" />
  <br />
  <button onclick="checkColor()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
</div>

<div class="container hidden" id="messageScreen">
  <h2 id="messageText"></h2>
</div>

<div class="container hidden" id="mazeContainer">
  <h2>–ü–æ–π–º–∞–π –¥–≤–µ—Ä—å! üö™</h2>
  <div id="maze"></div>
  <p style="margin-top:10px; color:#6b4f4f; font-weight:bold;">–£–ø—Ä–∞–≤–ª—è–π —Å—Ç—Ä–µ–ª–∫–∞–º–∏</p>
</div>

<script>
  // –≠—Ç–∞–ø—ã –∏–≥—Ä—ã
  const colorScreen = document.getElementById("colorScreen");
  const messageScreen = document.getElementById("messageScreen");
  const mazeContainer = document.getElementById("mazeContainer");
  const messageText = document.getElementById("messageText");
  const maze = document.getElementById("maze");

  // –°–æ–∑–¥–∞–µ–º –∏–≥—Ä–æ–∫–∞ (–∫–∞–ø–∏–±–∞—Ä—É)
  const player = document.createElement("img");
  player.id = "player";
  player.src = "https://i.ibb.co/7SYW8cQ/capybara-cartoon.png"; // –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑ —Ç–≤–æ–µ–≥–æ —Ñ–∞–π–ª–∞
  player.alt = "–ö–∞–ø–∏–±–∞—Ä–∞";
  maze.appendChild(player);

  // –°–æ–∑–¥–∞–µ–º —Ü–µ–ª—å (–¥–≤–µ—Ä—å)
  const goal = document.createElement("div");
  goal.id = "goal";
  maze.appendChild(goal);

  // –°—Ç–µ–Ω—ã –ª–∞–±–∏—Ä–∏–Ω—Ç–∞ ‚Äî –∑–∞–¥–∞—ë–º –∏—Ö –∂—ë—Å—Ç–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
  let walls = [];

  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ä–∞–∑–º–µ—Ä—ã —Å—Ç–µ–Ω (—Ç—É–ø–∏–∫–∏, –∫–æ—Ä–∏–¥–æ—Ä—ã)
  const wallsData = [
    {top: 0, left: 0, width: 500, height: 20},    // –≤–µ—Ä—Ö–Ω—è—è —Å—Ç–µ–Ω–∞
    {top: 0, left: 0, width: 20, height: 500},    // –ª–µ–≤–∞—è —Å—Ç–µ–Ω–∞
    {top: 480, left: 0, width: 500, height: 20},  // –Ω–∏–∂–Ω—è—è —Å—Ç–µ–Ω–∞
    {top: 0, left: 480, width: 20, height: 500},  // –ø—Ä–∞–≤–∞—è —Å—Ç–µ–Ω–∞
    {top: 100, left: 20, width: 460, height: 20},
    {top: 200, left: 0, width: 380, height: 20},
    {top: 300, left: 120, width: 380, height: 20},
    {top: 400, left: 0, width: 380, height: 20},

    {top: 20, left: 100, width: 20, height: 380},
    {top: 120, left: 200, width: 20, height: 380},
    {top: 220, left: 300, width: 20, height: 180},
    {top: 320, left: 400, width: 20, height: 180},
    {top: 420, left: 100, width: 20, height: 80},

    {top: 150, left: 20, width: 20, height: 150},
    {top: 250, left: 120, width: 20, height: 100},
    {top: 350, left: 220, width: 20, height: 100},

    {top: 50, left: 380, width: 20, height: 120},
    {top: 200, left: 480, width: 20, height: 50},
  ];

  // –ü–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞
  let playerPos = {top: 40, left: 40};
  const playerSize = 60;

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π —Å —Å—Ç–µ–Ω–∞–º–∏
  function checkCollision(x, y) {
    for(let w of walls) {
      let rx = parseInt(w.style.left);
      let ry = parseInt(w.style.top);
      let rw = parseInt(w.style.width);
      let rh = parseInt(w.style.height);
      if (x + playerSize > rx &&
          x < rx + rw &&
          y + playerSize > ry &&
          y < ry + rh) {
        return true;
      }
    }
    return false;
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
  function checkWin(x, y) {
    let gx = parseInt(goal.style.left);
    let gy = parseInt(goal.style.top);
    let gw = parseInt(goal.style.width);
    let gh = parseInt(goal.style.height);
    return (x + playerSize > gx &&
            x < gx + gw &&
            y + playerSize > gy &&
            y < gy + gh);
  }

  // –°–æ–∑–¥–∞–µ–º –º—ã–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä–∏
  function createBubbles(count) {
    for(let i = 0; i < count; i++) {
      const b = document.createElement("div");
      b.className = "bubble";
      b.style.width = b.style.height = (10 + Math.random()*20) + "px";
      b.style.left = Math.random()*window.innerWidth + "px";
      b.style.top = window.innerHeight + "px";
      b.style.animationDuration = (3 + Math.random()*4) + "s";
      b.style.animationDelay = (Math.random()*5) + "s";
      document.body.appendChild(b);
    }
  }

  // –ó–∞–ø—É—Å–∫ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞
  function startMaze() {
    colorScreen.classList.add("hidden");
    messageScreen.classList.add("hidden");
    mazeContainer.classList.remove("hidden");

    // –°–æ–∑–¥–∞–µ–º —Å—Ç–µ–Ω—ã –ª–∞–±–∏—Ä–∏–Ω—Ç–∞
    walls.forEach(w => maze.removeChild(w));
    walls = [];

    for(let wdata of wallsData) {
      const w = document.createElement("div");
      w.className = "wall";
      w.style.top = wdata.top + "px";
      w.style.left = wdata.left + "px";
      w.style.width = wdata.width + "px";
      w.style.height = wdata.height + "px";
      maze.appendChild(w);
      walls.push(w);
    }

    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –∏–≥—Ä–æ–∫–∞
    playerPos = {top: 40, left: 40};
    player.style.top = playerPos.top + "px";
    player.style.left = playerPos.left + "px";

    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º —Ü–µ–ª—å - –¥–≤–µ—Ä—å (—Å—Ç–∞–≤–∏–º –≤ —É–≥–æ–ª —Å–ø—Ä–∞–≤–∞ —Å–Ω–∏–∑—É)
    goal.style.top = "410px";
    goal.style.left = "420px";
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å —Ü–≤–µ—Ç–∞
  function checkColor() {
    const val = document.getElementById("colorInput").value.toLowerCase().trim();
    if(val === "—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π") {
      messageText.innerText = "Chill üòé";
      messageScreen.classList.remove("hidden");
      colorScreen.classList.add("hidden");
      setTimeout(() => {
        messageScreen.classList.add("hidden");
        startMaze();
      }, 1500);
    } else {
      messageText.innerText = "–¢—ã —Å–µ—Ä—å–µ–∑–Ω–æ? –ù–∞—Å—Ç–æ–ª—å–∫–æ –ø–ª–æ—Ö–æ –º–µ–Ω—è –∑–Ω–∞–µ—à—å?";
      messageScreen.classList.remove("hidden");
      colorScreen.classList.add("hidden");
    }
  }

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏
  document.addEventListener("keydown", e => {
    if (mazeContainer.classList.contains("hidden")) return;
    const step = 10;
    let nx = playerPos.left;
    let ny = playerPos.top;

    if (e.key === "ArrowUp") ny -= step;
    else if (e.key === "ArrowDown") ny += step;
    else if (e.key === "ArrowLeft") nx -= step;
    else if (e.key === "ArrowRight") nx += step;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü
    if (nx < 0) nx = 0;
    if (ny < 0) ny = 0;
    if (nx > 500 - playerSize) nx = 500 - playerSize;
    if (ny > 500 - playerSize) ny = 500 - playerSize;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π
    if (!checkCollision(nx, ny)) {
      playerPos.left = nx;
      playerPos.top = ny;
      player.style.left = nx + "px";
      player.style.top = ny + "px";
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
    if (checkWin(playerPos.left, playerPos.top)) {
      mazeContainer.classList.add("hidden");
      messageText.innerText = "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –ø—Ä–æ—à—ë–ª! –° –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è, –π–µ–µ–µ–µ–µ–µ–µ–π!";
      messageScreen.classList.remove("hidden");
      createBubbles(80);
    }
  });
</script>

</body>
</html>
