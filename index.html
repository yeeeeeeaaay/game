<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –º–æ—Ä—Å–∫–æ–π –±–æ–π ü¶´‚öì</title>

<style>
body{
  margin:0;
  font-family:Comic Sans MS, Arial;
  background:linear-gradient(135deg,#ffe6f2,#ffd966);
  text-align:center;
}

.container{
  width:520px;
  margin:20px auto;
  background:rgba(255,255,255,.95);
  border-radius:20px;
  padding:20px;
  box-shadow:0 0 15px #0002;
}

.hidden{display:none;}

button,input{
  font-size:18px;
  padding:10px 20px;
  border-radius:12px;
  border:2px solid #6b4f4f;
}

button{
  background:#6b4f4f;
  color:white;
  cursor:pointer;
}

.board{
  display:grid;
  grid-template-columns:repeat(6,60px);
  grid-template-rows:repeat(6,60px);
  gap:6px;
  justify-content:center;
  margin:15px auto;
}

.cell{
  width:60px;
  height:60px;
  background:#8fd3f4;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.cell img{
  width:48px;
  pointer-events:none;
}

.hit{
  background:#ff6b6b !important;
}

.miss{
  background:#ddd !important;
}

h3{color:#6b4f4f;margin-bottom:5px;}
</style>
</head>

<body>

<!-- –í–û–ü–†–û–° -->
<div class="container" id="question">
  <h2>ü¶´ –¢–≤–æ—è –ª—é–±–∏–º–∫–∞?</h2>
  <img src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" width="160">
  <br><br>
  <input id="answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
  <br><br>
  <button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>

  <iframe width="100%" height="230"
    src="https://www.youtube.com/embed/kbEC-AGr9n0?start=13&autoplay=1&loop=1&playlist=kbEC-AGr9n0"
    allow="autoplay">
  </iframe>
</div>

<!-- –°–û–û–ë–©–ï–ù–ò–ï -->
<div class="container hidden" id="message">
  <h2 id="msgText"></h2>
</div>

<!-- –ò–ì–†–ê -->
<div class="container hidden" id="game">
  <h2>‚öì –ú–æ—Ä—Å–∫–æ–π –±–æ–π —Å –∫–∞–ø–∏–±–∞—Ä–∞–º–∏</h2>

  <h3>–¢–≤–æ–∏ –∫–∞–ø–∏–±–∞—Ä—ã</h3>
  <div class="board" id="playerBoard"></div>

  <h3>–ö–∞–ø–∏–±–∞—Ä—ã –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</h3>
  <div class="board" id="botBoard"></div>
</div>

<script>
const SIZE=6;
const CAPY_IMG="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png";

let player=[], bot=[];
let playerAlive=3, botAlive=3;
let playerTurn=true;

const q=document.getElementById("question");
const m=document.getElementById("message");
const msg=document.getElementById("msgText");
const g=document.getElementById("game");

function checkAnswer(){
  const a=document.getElementById("answer").value.toLowerCase().trim();
  if(a==="–ª–∏—Å–∞"){
    msg.innerText="Chill üòé";
    q.classList.add("hidden");
    m.classList.remove("hidden");
    setTimeout(()=>{
      m.classList.add("hidden");
      startGame();
    },1200);
  }else{
    msg.innerText="–î—É–º–∞—é, —Ç–≤–æ—è –ª—é–±–∏–º–∫–∞ —Ç–µ–±—è –Ω–µ –ø—Ä–æ—Å—Ç–∏—Ç üòÇ";
    q.classList.add("hidden");
    m.classList.remove("hidden");
  }
}

function startGame(){
  g.classList.remove("hidden");
  setupBoards();
}

function setupBoards(){
  const pB=document.getElementById("playerBoard");
  const bB=document.getElementById("botBoard");
  pB.innerHTML=""; bB.innerHTML="";
  player=[]; bot=[];
  playerAlive=3; botAlive=3;
  playerTurn=true;

  for(let i=0;i<36;i++){
    player[i]=false;
    bot[i]=false;

    const pc=document.createElement("div");
    pc.className="cell";
    pB.appendChild(pc);

    const bc=document.createElement("div");
    bc.className="cell";
    bc.onclick=()=>playerShot(i,bc);
    bB.appendChild(bc);
  }

  placeCapy(player,pB,true);
  placeCapy(bot,bB,false);
}

function placeCapy(arr,board,show){
  let placed=0;
  while(placed<3){
    let i=Math.floor(Math.random()*36);
    if(!arr[i]){
      arr[i]=true;
      if(show){
        const img=document.createElement("img");
        img.src=CAPY_IMG;
        board.children[i].appendChild(img);
      }
      placed++;
    }
  }
}

function playerShot(i,cell){
  if(!playerTurn || cell.classList.contains("hit") || cell.classList.contains("miss")) return;

  if(bot[i]){
    cell.classList.add("hit");
    cell.innerHTML="üí•";
    bot[i]=false;
    botAlive--;
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerHTML="‚Ä¢";
    playerTurn=false;
    setTimeout(botShot,800);
  }
}

function botShot(){
  let i;
  do{
    i=Math.floor(Math.random()*36);
  }while(
    document.getElementById("playerBoard").children[i].classList.contains("hit") ||
    document.getElementById("playerBoard").children[i].classList.contains("miss")
  );

  const cell=document.getElementById("playerBoard").children[i];
  if(player[i]){
    cell.classList.add("hit");
    cell.innerHTML="üí•";
    player[i]=false;
    playerAlive--;
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerHTML="‚Ä¢";
  }
  playerTurn=true;
}

function checkEnd(){
  if(botAlive===0){
    endGame("üèÜ –ü–æ–±–µ–¥–∞! –í—Å–µ –∫–∞–ø–∏–±–∞—Ä—ã —Å–ø–∞—Å–µ–Ω—ã ü¶´üíõ");
  }
  if(playerAlive===0){
    endGame("üíÄ –ü–æ—Ä–∞–∂–µ–Ω–∏–µ‚Ä¶ –∫–∞–ø–∏–±–∞—Ä—ã —É—Ç–æ–Ω—É–ª–∏");
  }
}

function endGame(text){
  g.classList.add("hidden");
  msg.innerText=text;
  m.classList.remove("hidden");
}
</script>
</body>
</html>
