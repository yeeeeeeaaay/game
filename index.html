<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –ª–∞–±–∏—Ä–∏–Ω—Ç –±–µ–∑ canvas</title>
<style>
body {
  margin:0;
  font-family: Comic Sans MS, Arial, sans-serif;
  text-align:center;
  background: linear-gradient(to bottom, #87cefa, #fffacd); /* –Ω–µ–±–æ –∏ —Å–æ–ª–Ω—Ü–µ */
  overflow: hidden;
}

.hidden { display:none; }
.container {
  background: rgba(255,255,255,0.85);
  margin: 40px auto;
  padding: 25px;
  border-radius: 20px;
  width: 90%;
  max-width: 500px;
  position: relative;
  z-index:10;
}

button {
  font-size: 18px;
  padding: 12px 25px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  margin: 10px;
}

input {
  font-size: 18px;
  padding: 10px;
  border-radius: 10px;
  border: 2px solid #333;
}

/* –õ–∞–±–∏—Ä–∏–Ω—Ç */
#maze {
  position: relative;
  width: 100%;
  height: 500px;
  margin-top: 20px;
  background: #a3d9a5; /* —Ç—Ä–∞–≤–∞ */
  border: 3px solid #228B22;
  overflow: hidden;
}

/* –°—Ç–µ–Ω—ã */
.wall {
  position: absolute;
  background: #228B22;
}

/* –¶–µ–ª—å */
#goal {
  position: absolute;
  width: 50px;
  height: 50px;
  background: #ff69b4;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
}

/* –ò–≥—Ä–æ–∫ - –∫–∞–ø–∏–±–∞—Ä–∞ */
#player {
  position: absolute;
  width: 40px;
  height: 40px;
  background: #a0522d;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  font-size: 14px;
  font-weight: bold;
}
#player::after {
  content: "üç´";
  position: absolute;
  top: 5px;
  left: 5px;
}

/* –ú—ã–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä–∏ */
.bubble {
  position: absolute;
  width: 20px;
  height: 20px;
  background: rgba(173,216,230,0.7);
  border-radius: 50%;
  animation: floatUp linear infinite;
}

@keyframes floatUp {
  from { transform: translateY(0); }
  to { transform: translateY(-600px); opacity:0; }
}
</style>
</head>
<body>

<div class="container" id="colorScreen">
  <h2>ü¶´ –ú–æ–π –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç?</h2>
  <input id="colorInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç">
  <br><br>
  <button onclick="checkColor()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
</div>

<div class="container hidden" id="messageScreen">
  <h2 id="messageText"></h2>
</div>

<div class="container hidden" id="mazeContainer">
  <h2>–ü–æ–π–º–∞–π —Ü–µ–ª—å! üèÜ</h2>
  <div id="maze"></div>
</div>

<script>
/* ================== –õ–æ–≥–∏–∫–∞ —Ü–≤–µ—Ç–∞ ================== */
function checkColor(){
  const val = document.getElementById("colorInput").value.toLowerCase().trim();
  const msg = document.getElementById("messageScreen");

  if(val==="—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π"){
    document.getElementById("colorScreen").classList.add("hidden");
    msg.classList.remove("hidden");
    document.getElementById("messageText").innerText = "Chill üòé";

    setTimeout(()=>{
      msg.classList.add("hidden");
      startMaze(); // –∑–∞–ø—É—Å–∫–∞–µ–º –ª–∞–±–∏—Ä–∏–Ω—Ç
    }, 1500);
  } else {
    document.getElementById("colorScreen").classList.add("hidden");
    msg.classList.remove("hidden");
    document.getElementById("messageText").innerText = "–¢—ã —Å–µ—Ä—å–µ–∑–Ω–æ? –ù–∞—Å—Ç–æ–ª—å–∫–æ –ø–ª–æ—Ö–æ –º–µ–Ω—è –∑–Ω–∞–µ—à—å?";
  }
}

/* ================== –õ–∞–±–∏—Ä–∏–Ω—Ç ================== */
const maze = document.getElementById("maze");
const mazeContainer = document.getElementById("mazeContainer");
const player = document.createElement("div");
player.id="player";
maze.appendChild(player);

const goal = document.createElement("div");
goal.id="goal";
goal.innerText="üèÜ";
maze.appendChild(goal);

let walls = [];

function startMaze(){
  mazeContainer.classList.remove("hidden");
  player.style.top="10px";
  player.style.left="10px";

  // —Ü–µ–ª—å
  goal.style.top = (Math.random()*400+50)+"px";
  goal.style.left = (Math.random()*400+50)+"px";

  // —Å—Ç–µ–Ω—ã
  walls.forEach(w=>maze.removeChild(w));
  walls=[];
  for(let i=0;i<10;i++){
    const w = document.createElement("div");
    w.className="wall";
    w.style.width = (Math.random()*100+50)+"px";
    w.style.height = "20px";
    w.style.top = (Math.random()*400+50)+"px";
    w.style.left = (Math.random()*400+50)+"px";
    maze.appendChild(w);
    walls.push(w);
  }
}

/* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ */
document.addEventListener("keydown",(e)=>{
  if(mazeContainer.classList.contains("hidden")) return;
  const step = 10;
  let px = parseInt(player.style.left);
  let py = parseInt(player.style.top);
  let nx = px, ny = py;

  if(e.key==="ArrowUp") ny -= step;
  if(e.key==="ArrowDown") ny += step;
  if(e.key==="ArrowLeft") nx -= step;
  if(e.key==="ArrowRight") nx += step;

  // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π —Å–æ —Å—Ç–µ–Ω–∞–º–∏
  let collide=false;
  walls.forEach(w=>{
    const rx=parseInt(w.style.left), ry=parseInt(w.style.top),
          rw=parseInt(w.style.width), rh=parseInt(w.style.height);
    if(nx+40>rx && nx<rx+rw && ny+40>ry && ny<ry+rh){
      collide=true;
    }
  });

  if(!collide){
    player.style.left = nx+"px";
    player.style.top = ny+"px";
  }

  // –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
  const gx = parseInt(goal.style.left), gy=parseInt(goal.style.top);
  if(nx+40>gx && nx<gx+50 && ny+40>gy && ny<gy+50){
    mazeContainer.classList.add("hidden");
    showCongrats();
  }
});

/* ================== –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ + –ø—É–∑—ã—Ä—å–∫–∏ ================== */
function showCongrats(){
  const msg = document.getElementById("messageScreen");
  msg.classList.remove("hidden");
  document.getElementById("messageText").innerText="–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –ø—Ä–æ—à—ë–ª! –° –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è, –π–µ–µ–µ–µ–µ–µ–µ–π!";

  // —Å–æ–∑–¥–∞—ë–º –º—ã–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä–∏
  for(let i=0;i<30;i++){
    const b = document.createElement("div");
    b.className="bubble";
    b.style.left = Math.random()*window.innerWidth+"px";
    b.style.top = window.innerHeight+"px";
    b.style.width = b.style.height = (Math.random()*30+10)+"px";
    b.style.animationDuration = (Math.random()*3+2)+"s";
    document.body.appendChild(b);
  }
}
</script>

</body>
</html>
