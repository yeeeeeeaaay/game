<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ö–∞–ø–∏–±–∞—Ä–∞: –ú–æ—Ä—Å–∫–æ–π –±–æ–π ü¶´‚öì</title>

<style>
body{
  margin:0;
  font-family:Comic Sans MS, Arial;
  background:linear-gradient(135deg,#fff7e6,#ffd966);
  text-align:center;
}

.container{
  width:520px;
  margin:20px auto;
  background:rgba(255,255,255,.9);
  border-radius:20px;
  padding:20px;
  box-shadow:0 0 15px #b8860baa;
}

.hidden{display:none;}

button{
  font-size:18px;
  padding:10px 25px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  background:#6b4f4f;
  color:white;
}

input{
  font-size:18px;
  padding:10px;
  border-radius:12px;
  border:2px solid #6b4f4f;
  width:60%;
}

.board{
  display:grid;
  grid-template-columns:repeat(6,50px);
  grid-template-rows:repeat(6,50px);
  gap:4px;
  justify-content:center;
  margin:10px auto;
}

.cell{
  width:50px;
  height:50px;
  background:#a3d9ff;
  border-radius:6px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
}

.ship{background:#6b4f4f;}
.hit{background:red;color:white;}
.miss{background:#ddd;}

h3{margin:10px 0;color:#6b4f4f;}
</style>
</head>

<body>

<!-- –í–û–ü–†–û–° -->
<div class="container" id="questionScreen">
  <h2>ü¶´ –¢–≤–æ—è –ª—é–±–∏–º–∫–∞?</h2>
  <img src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" width="180">
  <br><br>
  <input id="answerInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
  <br><br>
  <button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>

  <iframe width="100%" height="250"
    src="https://www.youtube.com/embed/kbEC-AGr9n0?start=13&autoplay=1&loop=1&playlist=kbEC-AGr9n0&controls=1"
    allow="autoplay">
  </iframe>
</div>

<!-- –°–û–û–ë–©–ï–ù–ò–ï -->
<div class="container hidden" id="messageScreen">
  <h2 id="messageText"></h2>
</div>

<!-- –ò–ì–†–ê -->
<div class="container hidden" id="gameScreen">
  <h2>‚öì –ú–æ—Ä—Å–∫–æ–π –±–æ–π</h2>

  <h3>–¢–≤–æ–∏ –∫–æ—Ä–∞–±–ª–∏</h3>
  <div class="board" id="playerBoard"></div>

  <h3>–ü–æ–ª–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</h3>
  <div class="board" id="botBoard"></div>
</div>

<script>
const qScreen=document.getElementById("questionScreen");
const mScreen=document.getElementById("messageScreen");
const gScreen=document.getElementById("gameScreen");
const mText=document.getElementById("messageText");

const SIZE=6;
let player=[], bot=[];
let playerShips=3, botShips=3;
let turn=true;

// ---------- –í–û–ü–†–û–° ----------
function checkAnswer(){
  const ans=document.getElementById("answerInput").value.toLowerCase().trim();
  if(ans==="–ª–∏—Å–∞"){
    mText.innerText="Chill üòé";
    qScreen.classList.add("hidden");
    mScreen.classList.remove("hidden");
    setTimeout(()=>{
      mScreen.classList.add("hidden");
      startGame();
    },1500);
  }else{
    mText.innerText="–î—É–º–∞—é, —Ç–≤–æ—è –ª—é–±–∏–º–∫–∞ —Ç–µ–±—è –Ω–µ –ø—Ä–æ—Å—Ç–∏—Ç üòÇ";
    qScreen.classList.add("hidden");
    mScreen.classList.remove("hidden");
  }
}

// ---------- –ò–ì–†–ê ----------
function startGame(){
  gScreen.classList.remove("hidden");
  initBoards();
}

function initBoards(){
  const pB=document.getElementById("playerBoard");
  const bB=document.getElementById("botBoard");
  pB.innerHTML=""; bB.innerHTML="";
  player=[]; bot=[];
  playerShips=3; botShips=3;

  for(let i=0;i<SIZE*SIZE;i++){
    player[i]=false;
    bot[i]=false;

    const pc=document.createElement("div");
    pc.className="cell";
    pB.appendChild(pc);

    const bc=document.createElement("div");
    bc.className="cell";
    bc.onclick=()=>playerShot(i,bc);
    bB.appendChild(bc);
  }

  placeShips(player,document.getElementById("playerBoard"),true);
  placeShips(bot,document.getElementById("botBoard"),false);
}

function placeShips(arr,board,show){
  let placed=0;
  while(placed<3){
    let i=Math.floor(Math.random()*36);
    if(!arr[i]){
      arr[i]=true;
      if(show) board.children[i].classList.add("ship");
      placed++;
    }
  }
}

function playerShot(i,cell){
  if(!turn || cell.classList.contains("hit") || cell.classList.contains("miss")) return;

  if(bot[i]){
    cell.classList.add("hit");
    cell.innerText="üî•";
    bot[i]=false;
    botShips--;
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerText="‚Ä¢";
    turn=false;
    setTimeout(botShot,700);
  }
}

function botShot(){
  let i;
  do{
    i=Math.floor(Math.random()*36);
  }while(
    document.getElementById("playerBoard").children[i].classList.contains("hit") ||
    document.getElementById("playerBoard").children[i].classList.contains("miss")
  );

  const cell=document.getElementById("playerBoard").children[i];

  if(player[i]){
    cell.classList.add("hit");
    cell.innerText="üî•";
    player[i]=false;
    playerShips--;
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerText="‚Ä¢";
  }
  turn=true;
}

function checkEnd(){
  if(botShips===0){
    endGame("üèÜ –ü–æ–±–µ–¥–∞! –ö–∞–ø–∏–±–∞—Ä–∞ —Å—á–∞—Å—Ç–ª–∏–≤–∞ ü¶´üíõ");
  }
  if(playerShips===0){
    endGame("üíÄ –ü–æ—Ä–∞–∂–µ–Ω–∏–µ‚Ä¶ –ö–∞–ø–∏–±–∞—Ä–∞ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∞");
  }
}

function endGame(text){
  gScreen.classList.add("hidden");
  mText.innerText=text;
  mScreen.classList.remove("hidden");
}
</script>
</body>
</html>
