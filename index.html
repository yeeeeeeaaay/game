<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –ª–∞–±–∏—Ä–∏–Ω—Ç</title>
<style>
  /* –û–±—â–∏–π —Å—Ç–∏–ª—å */
  body {
    margin: 0;
    font-family: Comic Sans MS, Arial, sans-serif;
    background: linear-gradient(135deg, #fff7e6 0%, #ffd966 100%);
    overflow: hidden;
    user-select: none;
  }
  .container {
    width: 520px;
    margin: 20px auto;
    background: rgba(255 255 255 / 0.9);
    border-radius: 20px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 0 15px #b8860baa;
    position: relative;
    z-index: 10;
  }
  h2 {
    margin-top: 0;
    color: #6b4f4f;
  }
  button {
    font-size: 18px;
    padding: 12px 30px;
    margin-top: 15px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #6b4f4f;
    color: white;
    transition: background 0.3s;
  }
  button:hover {
    background: #a47171;
  }
  input {
    font-size: 18px;
    padding: 10px;
    border-radius: 12px;
    border: 2px solid #6b4f4f;
    width: 60%;
  }

  /* –õ–∞–±–∏—Ä–∏–Ω—Ç */
  #maze {
    position: relative;
    width: 500px;
    height: 500px;
    margin: 20px auto 0;
    background: #a3d9a5; /* —Ç—Ä–∞–≤–∞ */
    border: 5px solid #6b4f4f;
    border-radius: 15px;
    box-shadow: inset 0 0 15px #558855aa;
  }
  .wall {
    position: absolute;
    background: #6b4f4f;
    border-radius: 6px;
  }

  /* –¶–µ–ª—å - —à–æ–∫–æ–ª–∞–¥–∫–∞ Snickers */
  #goal {
    position: absolute;
    width: 60px;
    height: 30px;
    background: transparent;
    cursor: pointer;
  }
  #goal img {
    width: 100%;
    height: 100%;
    user-select: none;
    pointer-events: none;
  }

  /* –ò–≥—Ä–æ–∫ - –∫–∞–ø–∏–±–∞—Ä–∞ */
  #player {
    position: absolute;
    width: 60px;
    height: 60px;
    user-select: none;
    cursor: default;
    transition: left 0.1s ease, top 0.1s ease;
  }

  /* –ú—ã–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä–∏ */
  .bubble {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.35);
    box-shadow: 0 0 15px 5px rgba(255 255 255 / 0.5);
    animation: floatUp linear infinite;
    pointer-events: none;
  }
  @keyframes floatUp {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0.7;
    }
    100% {
      transform: translateY(-700px) scale(1.6);
      opacity: 0;
    }
  }
</style>
</head>
<body>

<div class="container" id="colorScreen">
  <h2>ü¶´ –ú–æ–π –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç?</h2>
  <input id="colorInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç" autocomplete="off" />
  <br />
  <button onclick="checkColor()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
</div>

<div class="container hidden" id="messageScreen">
  <h2 id="messageText"></h2>
</div>

<div class="container hidden" id="mazeContainer">
  <h2>–ü–æ–π–º–∞–π —à–æ–∫–æ–ª–∞–¥–∫—É Snickers! üç´</h2>
  <div id="maze"></div>
  <p style="margin-top:10px; color:#6b4f4f; font-weight:bold;">–£–ø—Ä–∞–≤–ª—è–π —Å—Ç—Ä–µ–ª–∫–∞–º–∏</p>
</div>

<script>
  const colorScreen = document.getElementById("colorScreen");
  const messageScreen = document.getElementById("messageScreen");
  const mazeContainer = document.getElementById("mazeContainer");
  const messageText = document.getElementById("messageText");
  const maze = document.getElementById("maze");

  const player = document.createElement("img");
  player.id = "player";
  player.src = "https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png";
  player.alt = "–ö–∞–ø–∏–±–∞—Ä–∞";
  maze.appendChild(player);

  const goal = document.createElement("div");
  goal.id = "goal";
  const goalImg = document.createElement("img");
  goalImg.src = "https://upload.wikimedia.org/wikipedia/commons/4/43/Snickers_bar_logo.png";
  goalImg.alt = "Snickers";
  goal.appendChild(goalImg);
  maze.appendChild(goal);

  let walls = [];

  const wallsData = [
    {top: 0, left: 0, width: 500, height: 20},
    {top: 0, left: 0, width: 20, height: 500},
    {top: 480, left: 0, width: 500, height: 20},
    {top: 0, left: 480, width: 20, height: 500},
    {top: 100, left: 20, width: 460, height: 20},
    {top: 200, left: 0, width: 380, height: 20},
    {top: 300, left: 120, width: 380, height: 20},
    {top: 400, left: 0, width: 380, height: 20},

    {top: 20, left: 100, width: 20, height: 380},
    {top: 120, left: 200, width: 20, height: 380},
    {top: 220, left: 300, width: 20, height: 180},
    {top: 320, left: 400, width: 20, height: 180},
    {top: 420, left: 100, width: 20, height: 80},

    {top: 150, left: 20, width: 20, height: 150},
    {top: 250, left: 120, width: 20, height: 100},
    {top: 350, left: 220, width: 20, height: 100},

    {top: 50, left: 380, width: 20, height: 120},
    {top: 200, left: 480, width: 20, height: 50},
  ];

  let playerPos = {top: 40, left: 40};
  const playerSize = 60;

  function checkCollision(x, y) {
    for(let w of walls) {
      let rx = parseInt(w.style.left);
      let ry = parseInt(w.style.top);
      let rw = parseInt(w.style.width);
      let rh = parseInt(w.style.height);
      if (x + playerSize > rx &&
          x < rx + rw &&
          y + playerSize > ry &&
          y < ry + rh) {
        return true;
      }
    }
    return false;
  }

  function checkWin(x, y) {
    let gx = parseInt(goal.style.left);
    let gy = parseInt(goal.style.top);
    let gw = parseInt(goal.style.width);
    let gh = parseInt(goal.style.height);
    return (x + playerSize > gx &&
            x < gx + gw &&
            y + playerSize > gy &&
            y < gy + gh);
  }

  function createBubbles(count) {
    for(let i = 0; i < count; i++) {
      const b = document.createElement("div");
      b.className = "bubble";
      b.style.width = b.style.height = (10 + Math.random()*20) + "px";
      b.style.left = Math.random()*window.innerWidth + "px";
      b.style.top = window.innerHeight + "px";
      b.style.animationDuration = (3 + Math.random()*4) + "s";
      b.style.animationDelay = (Math.random()*5) + "s";
      document.body.appendChild(b);
    }
  }

  function startMaze() {
    colorScreen.classList.add("hidden");
    messageScreen.classList.add("hidden");
    mazeContainer.classList.remove("hidden");

    walls.forEach(w => maze.removeChild(w));
    walls = [];

    for(let wdata of wallsData) {
      const w = document.createElement("div");
      w.className = "wall";
      w.style.top = wdata.top + "px";
      w.style.left = wdata.left + "px";
      w.style.width = wdata.width + "px";
      w.style.height = wdata.height + "px";
      maze.appendChild(w);
      walls.push(w);
    }

    playerPos = {top: 40, left: 40};
    player.style.top = playerPos.top + "px";
    player.style.left = playerPos.left + "px";

    goal.style.top = "410px";
    goal.style.left = "420px";
  }

  function checkColor() {
    const val = document.getElementById("colorInput").value.toLowerCase().trim();
    if(val === "—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π") {
      messageText.innerText = "Chill üòé";
      messageScreen.classList.remove("hidden");
      colorScreen.classList.add("hidden");
      setTimeout(() => {
        messageScreen.classList.add("hidden");
        startMaze();
      }, 1500);
    } else {
      messageText.innerText = "–¢—ã —Å–µ—Ä—å–µ–∑–Ω–æ? –ù–∞—Å—Ç–æ–ª—å–∫–æ –ø–ª–æ—Ö–æ –º–µ–Ω—è –∑–Ω–∞–µ—à—å?";
      messageScreen.classList.remove("hidden");
      colorScreen.classList.add("hidden");
    }
  }

  document.addEventListener("keydown", e => {
    if (mazeContainer.classList.contains("hidden")) return;
    const step = 10;
    let nx = playerPos.left;
    let ny = playerPos.top;

    if (e.key === "ArrowUp") ny -= step;
    else if (e.key === "ArrowDown") ny += step;
    else if (e.key === "ArrowLeft") nx -= step;
    else if (e.key === "ArrowRight") nx += step;

    if (nx < 0) nx = 0;
    if (ny < 0) ny = 0;
    if (nx > 500 - playerSize) nx = 500 - playerSize;
    if (ny > 500 - playerSize) ny = 500 - playerSize;

    if (!checkCollision(nx, ny)) {
      playerPos.left = nx;
      playerPos.top = ny;
      player.style.left = nx + "px";
      player.style.top = ny + "px";
    }

    if (checkWin(playerPos.left, playerPos.top)) {
      mazeContainer.classList.add("hidden");
      messageText.innerText = "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –ø—Ä–æ—à—ë–ª! –° –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è, –π–µ–µ–µ–µ–µ–µ–µ–π!";
      messageScreen.classList.remove("hidden");
      createBubbles(100);
    }
  });
</script>

</body>
</html>

