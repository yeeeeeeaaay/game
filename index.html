<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –º–æ—Ä—Å–∫–æ–π –±–æ–π ü¶´‚öì</title>

<style>
body{
  margin:0;
  font-family:Comic Sans MS, Arial;
  background: linear-gradient(135deg,#87ceeb 0%, #ffe066 70%, #7CFC00 100%);
  text-align:center;
  overflow-x:hidden;
  position:relative;
}

/* –°–æ–ª–Ω—Ü–µ */
.sun{
  position:fixed;
  top:20px;
  right:20px;
  width:120px;
  height:120px;
  background:radial-gradient(circle,#fff700,#ffb300);
  border-radius:50%;
  box-shadow:0 0 50px #ffd700;
  z-index:0;
}

.container{
  width:520px;
  margin:20px auto;
  background:rgba(255,255,255,.95);
  border-radius:20px;
  padding:20px;
  box-shadow:0 0 15px #0002;
  position:relative;
  z-index:1;
}

.hidden{display:none;}

button,input{
  font-size:18px;
  padding:10px 20px;
  border-radius:12px;
  border:2px solid #6b4f4f;
}

button{
  background:#6b4f4f;
  color:white;
  cursor:pointer;
}

.board{
  display:grid;
  grid-template-columns:repeat(6,60px);
  grid-template-rows:repeat(6,60px);
  gap:6px;
  justify-content:center;
  margin:15px auto;
}

.cell{
  width:60px;
  height:60px;
  background:#8fd3f4;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  position:relative;
}

.cell img{
  width:48px;
  pointer-events:none;
}

.hit{
  background:#ff6b6b !important;
}

.miss{
  background:#ddd !important;
}

h3{color:#6b4f4f;margin-bottom:5px;}

/* –ü–∏—Å—å–º–æ */
#letter{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:white;
  padding:30px 40px;
  border-radius:25px;
  font-size:22px;
  box-shadow:0 0 30px gold;
  z-index:2000;
  display:none;
  text-align:center;
}

/* –ü—É–∑—ã—Ä—å–∫–∏ */
.bubble{
  position:fixed;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0.3));
  animation:floatUp linear forwards;
  z-index:1500;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–∑—ã—Ä—å–∫–æ–≤ */
@keyframes floatUp{
  0%{transform:translateY(0) scale(1);opacity:1;}
  100%{transform:translateY(-800px) scale(1.5);opacity:0;}
}

/* –®–æ–∫–æ–ª–∞–¥–∫–∞ */
.chocolate{
  position:fixed;
  width:100px;
  height:100px;
  pointer-events:none;
  z-index:1600;
  animation:fall 1.2s ease forwards;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞–¥–µ–Ω–∏—è —à–æ–∫–æ–ª–∞–¥–æ–∫ */
@keyframes fall{
  0%{transform:translateY(-120px) rotate(0deg);}
  50%{transform:translateY(100px) rotate(180deg);}
  100%{transform:translateY(500px) rotate(360deg);}
}
</style>
</head>

<body>
<div class="sun"></div>

<!-- –í–û–ü–†–û–° -->
<div class="container" id="question">
  <h2>ü¶´ –¢–≤–æ—è –ª—é–±–∏–º–∫–∞?</h2>
  <img src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" width="160">
  <br><br>
  <input id="answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
  <br><br>
  <button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>

  <iframe width="100%" height="230"
    src="https://www.youtube.com/embed/kbEC-AGr9n0?start=13&autoplay=1&loop=1&playlist=kbEC-AGr9n0"
    allow="autoplay">
  </iframe>
</div>

<!-- –°–û–û–ë–©–ï–ù–ò–ï -->
<div class="container hidden" id="message">
  <h2 id="msgText"></h2>
</div>

<!-- –ò–ì–†–ê -->
<div class="container hidden" id="game">
  <h2>‚öì –ú–æ—Ä—Å–∫–æ–π –±–æ–π —Å –∫–∞–ø–∏–±–∞—Ä–∞–º–∏</h2>

  <h3>–¢–≤–æ–∏ –∫–∞–ø–∏–±–∞—Ä—ã</h3>
  <div class="board" id="playerBoard"></div>

  <h3>–ö–∞–ø–∏–±–∞—Ä—ã –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</h3>
  <div class="board" id="botBoard"></div>
</div>

<!-- –ü–∏—Å—å–º–æ –ø—Ä–∏ –ø–æ–±–µ–¥–µ -->
<div id="letter">
‚úâÔ∏è<br><br>
–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –≤—ã–∏–≥—Ä–∞–ª!<br>
–ò —Å –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è üòè‚ú®<br><br>
–ô–µ–µ–µ–µ–µ–µ–µ–π!!!
</div>

<script>
const SIZE=6;
const CAPY_IMG="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png";
const CHOC_IMG="https://snickersni.kz/i/packs/dushnila.png";

let player=[], bot=[];
let playerAlive=3, botAlive=3;
let playerTurn=true;

const q=document.getElementById("question");
const m=document.getElementById("message");
const msg=document.getElementById("msgText");
const g=document.getElementById("game");
const letter=document.getElementById("letter");

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
function checkAnswer(){
  const a=document.getElementById("answer").value.toLowerCase().trim();
  if(a==="–ª–∏—Å–∞"){
    msg.innerText="Chill üòé";
    q.classList.add("hidden");
    m.classList.remove("hidden");
    setTimeout(()=>{
      m.classList.add("hidden");
      startGame();
    },1200);
  }else{
    msg.innerText="–î—É–º–∞—é, —Ç–≤–æ—è –ª—é–±–∏–º–∫–∞ —Ç–µ–±—è –Ω–µ –ø—Ä–æ—Å—Ç–∏—Ç üòÇ";
    q.classList.add("hidden");
    m.classList.remove("hidden");
  }
}

// –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
function startGame(){
  g.classList.remove("hidden");
  setupBoards();
}

// –°–æ–∑–¥–∞–µ–º –¥–æ—Å–∫–∏ –∏ –∫–∞–ø–∏–±–∞—Ä
function setupBoards(){
  const pB=document.getElementById("playerBoard");
  const bB=document.getElementById("botBoard");
  pB.innerHTML=""; bB.innerHTML="";
  player=[]; bot=[];
  playerAlive=3; botAlive=3;
  playerTurn=true;

  for(let i=0;i<SIZE*SIZE;i++){
    player[i]=false;
    bot[i]=false;

    const pc=document.createElement("div");
    pc.className="cell";
    pB.appendChild(pc);

    const bc=document.createElement("div");
    bc.className="cell";
    bc.onclick=()=>playerShot(i,bc);
    bB.appendChild(bc);
  }

  placeCapy(player,pB,true);
  placeCapy(bot,bB,false);
}

// –†–∞–∑–º–µ—â–∞–µ–º –∫–∞–ø–∏–±–∞—Ä
function placeCapy(arr,board,show){
  let placed=0;
  while(placed<3){
    let i=Math.floor(Math.random()*36);
    if(!arr[i]){
      arr[i]=true;
      if(show){
        const img=document.createElement("img");
        img.src=CAPY_IMG;
        board.children[i].appendChild(img);
      }
      placed++;
    }
  }
}

// –ü–∞–¥–∞—é—â–∏–µ —à–æ–∫–æ–ª–∞–¥–∫–∏
function dropChocolates(cell){
  const rect=cell.getBoundingClientRect();
  for(let i=0;i<6;i++){
    const choc=document.createElement("img");
    choc.src=CHOC_IMG;
    choc.className="chocolate";
    choc.style.left=(rect.left + Math.random()*40)+"px";
    choc.style.top="-150px";
    document.body.appendChild(choc);
    setTimeout(()=>document.body.removeChild(choc),1500);
  }
}

// –ü—É–∑—ã—Ä—å–∫–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ
function finalBubbles(){
  for(let i=0;i<50;i++){
    const b=document.createElement("div");
    b.className="bubble";
    b.style.width=b.style.height=(30+Math.random()*60)+"px";
    b.style.left=Math.random()*window.innerWidth+"px";
    b.style.top=window.innerHeight+"px";
    b.style.animationDuration=(3+Math.random()*3)+"s";
    document.body.appendChild(b);
    setTimeout(()=>document.body.removeChild(b),6000);
  }
}

// –í—ã—Å—Ç—Ä–µ–ª –∏–≥—Ä–æ–∫–∞
function playerShot(i,cell){
  if(!playerTurn || cell.classList.contains("hit") || cell.classList.contains("miss")) return;

  if(bot[i]){
    cell.classList.add("hit");
    cell.innerHTML="üí•";
    bot[i]=false;
    botAlive--;
    dropChocolates(cell);
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerHTML="‚Ä¢";
    playerTurn=false;
    setTimeout(botShot,800);
  }
}

// –•–æ–¥ –±–æ—Ç–∞
function botShot(){
  let i;
  do{
    i=Math.floor(Math.random()*36);
  }while(
    document.getElementById("playerBoard").children[i].classList.contains("hit") ||
    document.getElementById("playerBoard").children[i].classList.contains("miss")
  );

  const cell=document.getElementById("playerBoard").children[i];
  if(player[i]){
    cell.classList.add("hit");
    cell.innerHTML="üí•";
    player[i]=false;
    playerAlive--;
    dropChocolates(cell);
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerHTML="‚Ä¢";
  }
  playerTurn=true;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ü–∞ –∏–≥—Ä—ã
function checkEnd(){
  if(botAlive===0){
    endGame("üèÜ –ü–æ–±–µ–¥–∞! –í—Å–µ –∫–∞–ø–∏–±–∞—Ä—ã —Å–ø–∞—Å–µ–Ω—ã ü¶´",true);
  }
  if(playerAlive===0){
    endGame("üíÄ –ü–æ—Ä–∞–∂–µ–Ω–∏–µ‚Ä¶ –∫–∞–ø–∏–±–∞—Ä—ã —É—Ç–æ–Ω—É–ª–∏",false);
  }
}

// –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
function endGame(text,won){
  g.classList.add("hidden");
  msg.innerText=text;
  m.classList.remove("hidden");

  if(won){
    setTimeout(()=>{letter.style.display="block";},500);
    finalBubbles();
  }
}
</script>
</body>
</html>
