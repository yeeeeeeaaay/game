<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ö–∞–ø–∏–±–∞—Ä–∞ –®–∞—à–∫–∏</title>
<style>
  body {
    margin:0;
    font-family: Comic Sans MS, Arial, sans-serif;
    background: linear-gradient(135deg,#fff7e6 0%,#ffd966 100%);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
  }
  h2 {color:#6b4f4f;}
  #board {
    display:grid;
    grid-template-columns: repeat(8, 60px);
    grid-template-rows: repeat(8, 60px);
    border:5px solid #6b4f4f;
    border-radius:12px;
  }
  .cell {
    width:60px; height:60px;
    display:flex; align-items:center; justify-content:center;
  }
  .black {background:#6b4f4f;}
  .white {background:#ffd966;}
  .piece {width:40px; height:40px; border-radius:50%; cursor:pointer;}
  .player {background:#fff;}
  .bot {background:#000;}
  #capy {
    width:120px;
    margin-bottom:20px;
  }
</style>
</head>
<body>

<h2>ü¶´ –ö–∞–ø–∏–±–∞—Ä–∞ –®–∞—à–∫–∏</h2>
<img id="capy" src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" alt="–ö–∞–ø–∏–±–∞—Ä–∞">

<div id="board"></div>

<script>
const boardEl = document.getElementById("board");
let board = [];

// –°–æ–∑–¥–∞–µ–º –¥–æ—Å–∫—É –∏ —à–∞—à–∫–∏
function initBoard() {
  board = Array(8).fill(null).map(()=>Array(8).fill(null));
  for(let r=0;r<3;r++){
    for(let c=0;c<8;c++){
      if((r+c)%2) board[r][c]="bot";
    }
  }
  for(let r=5;r<8;r++){
    for(let c=0;c<8;c++){
      if((r+c)%2) board[r][c]="player";
    }
  }
  renderBoard();
}

function renderBoard(){
  boardEl.innerHTML="";
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      const cell = document.createElement("div");
      cell.className="cell "+((r+c)%2?"black":"white");
      if(board[r][c]){
        const piece = document.createElement("div");
        piece.className="piece "+board[r][c];
        cell.appendChild(piece);
      }
      boardEl.appendChild(cell);
    }
  }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—ä–µ–¥–µ–Ω–∏–µ –∏ –æ–±—ã—á–Ω—ã–π —Ö–æ–¥
function botMove() {
  const botPieces=[];
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      if(board[r][c]==="bot") botPieces.push([r,c]);
    }
  }

  // 1. –ò—â–µ–º –∞—Ç–∞–∫–∏
  for(let [r,c] of botPieces){
    const dirs=[[-1,-1],[-1,1],[1,-1],[1,1]];
    for(let [dr,dc] of dirs){
      const nr=r+dr, nc=c+dc;
      const jr=r+2*dr, jc=c+2*dc;
      if(nr>=0 && nr<8 && nc>=0 && nc<8 && jr>=0 && jr<8 && jc>=0 && jc<8){
        if(board[nr][nc]==="player" && !board[jr][jc]){
          board[jr][jc]="bot";
          board[r][c]=null;
          board[nr][nc]=null;
          renderBoard();
          return;
        }
      }
    }
  }

  // 2. –û–±—ã—á–Ω—ã–π —Ö–æ–¥
  for(let [r,c] of botPieces){
    const dirs=[[-1,-1],[-1,1],[1,-1],[1,1]];
    for(let [dr,dc] of dirs){
      const nr=r+dr, nc=c+dc;
      if(nr>=0 && nr<8 && nc>=0 && nc<8 && !board[nr][nc]){
        board[nr][nc]="bot";
        board[r][c]=null;
        renderBoard();
        return;
      }
    }
  }
}

// –ò–≥—Ä–æ–∫ —Ö–æ–¥–∏—Ç —Å—Ç—Ä–µ–ª–∫–∞–º–∏
let selected=null;
document.addEventListener("keydown",e=>{
  if(!selected){
    // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –±–µ–ª—É—é —à–∞—à–∫—É
    outer: for(let r=0;r<8;r++){
      for(let c=0;c<8;c++){
        if(board[r][c]==="player"){selected=[r,c]; break outer;}
      }
    }
  } else {
    let [r,c]=selected;
    let nr=r, nc=c;
    if(e.key==="ArrowUp") nr--; else if(e.key==="ArrowDown") nr++; 
    else if(e.key==="ArrowLeft") nc--; else if(e.key==="ArrowRight") nc++;
    if(nr>=0 && nr<8 && nc>=0 && nc<8){
      // –°—ä–µ–¥–µ–Ω–∏–µ
      const dr=nr-r, dc=nc-c;
      const jr=nr+dr, jc=nc+dc;
      if(board[nr][nc]==="bot" && jr>=0 && jr<8 && jc>=0 && jc<8 && !board[jr][jc]){
        board[jr][jc]="player";
        board[r][c]=null;
        board[nr][nc]=null;
      } else if(!board[nr][nc]){
        board[nr][nc]="player";
        board[r][c]=null;
      }
      selected=[nr,nc];
      renderBoard();
      setTimeout(botMove,300);
    }
  }
});

initBoard();
</script>

</body>
</html>
