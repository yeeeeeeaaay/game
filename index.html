<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–®–∞—à–∫–∏ —Å –∫–∞–ø–∏–±–∞—Ä–æ–π</title>
<style>
  body {
    margin:0;
    font-family: Comic Sans MS, Arial, sans-serif;
    background: linear-gradient(135deg,#fff7e6 0%,#ffd966 100%);
    text-align:center;
  }
  h2 {color:#6b4f4f;}
  #board {
    display:grid;
    grid-template-columns: repeat(8, 60px);
    grid-template-rows: repeat(8, 60px);
    margin: 20px auto;
    border: 4px solid #6b4f4f;
  }
  .cell {
    width:60px; height:60px;
    display:flex; align-items:center; justify-content:center;
  }
  .white { background:#eee; }
  .black { background:#6b4f4f; }
  .piece {
    width:45px; height:45px;
    border-radius:50%;
    cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    font-weight:bold;
  }
  .player { background:white; }
  .bot { background:black; }
  .selected { outline:3px solid yellow; }
  img { width:120px; margin-top:20px; }
</style>
</head>
<body>

<h2>ü¶´ –®–∞—à–∫–∏ —Å –∫–∞–ø–∏–±–∞—Ä–æ–π!</h2>
<img src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" alt="–ö–∞–ø–∏–±–∞—Ä–∞">

<div id="board"></div>

<script>
const boardEl = document.getElementById('board');
let board = [];
let selectedCell = null;

// —Å–æ–∑–¥–∞—ë–º –¥–æ—Å–∫—É –∏ —Ä–∞—Å—Å—Ç–∞–≤–ª—è–µ–º —à–∞—à–∫–∏
function initBoard(){
  board = Array(8).fill(null).map(()=>Array(8).fill(null));
  for(let r=0;r<3;r++){
    for(let c=0;c<8;c++){
      if((r+c)%2===1) board[r][c]="bot";
    }
  }
  for(let r=5;r<8;r++){
    for(let c=0;c<8;c++){
      if((r+c)%2===1) board[r][c]="player";
    }
  }
  renderBoard();
}

// –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –¥–æ—Å–∫–∏
function renderBoard(){
  boardEl.innerHTML="";
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      const cell = document.createElement('div');
      cell.className='cell '+((r+c)%2===0?'white':'black');
      cell.dataset.r=r; cell.dataset.c=c;
      cell.onclick = ()=>cellClick(r,c);
      const piece = board[r][c];
      if(piece){
        const p = document.createElement('div');
        p.className='piece '+piece+(selectedCell && selectedCell[0]===r && selectedCell[1]===c?' selected':'');
        cell.appendChild(p);
      }
      boardEl.appendChild(cell);
    }
  }
}

// —Ö–æ–¥ –∏–≥—Ä–æ–∫–∞
function cellClick(r,c){
  const piece = board[r][c];
  if(selectedCell){
    const [sr,sc] = selectedCell;
    const dr = r-sr; const dc = c-sc;
    if(!piece && Math.abs(dr)===1 && Math.abs(dc)===1){ // –æ–±—ã—á–Ω—ã–π —Ö–æ–¥
      board[r][c]="player"; board[sr][sc]=null;
      selectedCell=null; renderBoard(); setTimeout(botMove,300); return;
    }
    if(!piece && Math.abs(dr)===2 && Math.abs(dc)===2){ // –ø—Ä—ã–∂–æ–∫
      const jr=sr+dr/2, jc=sc+dc/2;
      if(board[jr][jc]==="bot"){
        board[jr][jc]=null;
        board[r][c]="player"; board[sr][sc]=null;
        selectedCell=null; renderBoard(); setTimeout(botMove,300); return;
      }
    }
    selectedCell=null; renderBoard(); // –æ—Ç–º–µ–Ω–∞
  } else if(piece==="player"){
    selectedCell=[r,c]; renderBoard();
  }
}

// –ø—Ä–æ—Å—Ç–æ–π –±–æ—Ç —Ö–æ–¥–∏—Ç —Å–ª—É—á–∞–π–Ω–æ–π —à–∞—à–∫–æ–π
function botMove(){
  const botPieces=[];
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      if(board[r][c]==="bot") botPieces.push([r,c]);
    }
  }
  for(let move of botPieces){
    const [r,c]=move;
    const dirs=[[-1,-1],[-1,1],[1,-1],[1,1]];
    for(let [dr,dc] of dirs){
      const nr=r+dr, nc=c+dc;
      if(nr>=0 && nr<8 && nc>=0 && nc<8 && !board[nr][nc]){
        board[nr][nc]="bot"; board[r][c]=null; renderBoard(); return;
      }
      if(nr+dr>=0 && nr+dr<8 && nc+dc>=0 && nc+dc<8 && board[nr][nc]==="player" && !board[nr+dr][nc+dc]){
        board[nr+dr][nc+dc]="bot"; board[r][c]=null; board[nr][nc]=null; renderBoard(); return;
      }
    }
  }
}

initBoard();
</script>
</body>
</html>
