<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–®–∞—à–∫–∏ —Å –∫–∞–ø–∏–±–∞—Ä–æ–π</title>
<style>
body {
  margin: 0;
  font-family: Comic Sans MS, Arial, sans-serif;
  background: linear-gradient(135deg, #fff7e6 0%, #ffd966 100%);
  text-align: center;
  overflow-x: hidden;
}
h1 { color:#6b4f4f; }
#capybara {
  width: 150px;
  margin: 10px auto;
}
#board {
  display: grid;
  grid-template-columns: repeat(8, 60px);
  grid-template-rows: repeat(8, 60px);
  margin: 20px auto;
  border: 4px solid #6b4f4f;
  box-shadow: 0 0 10px #555;
}
.cell {
  width: 60px;
  height: 60px;
}
.cell.black { background: #6b4f4f; }
.cell.white { background: #f0e4d7; }
.piece {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  margin: auto;
  cursor: pointer;
  position: relative;
  top:5px;
}
.white { background: #ffffff; }
.black { background: #000000; }
.selected { outline: 3px solid yellow; }
</style>
</head>
<body>

<h1>–®–∞—à–∫–∏ —Å –∫–∞–ø–∏–±–∞—Ä–æ–π ü¶´</h1>
<img id="capybara" src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" alt="–ö–∞–ø–∏–±–∞—Ä–∞">

<div id="board"></div>

<script>
const board = document.getElementById('board');
let cells = [];
let selectedPiece = null;
let playerTurn = true; // true = –∏–≥—Ä–æ–∫, false = –±–æ—Ç

// –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Å–∫–∏ –∏ —à–∞—à–µ–∫
function createBoard() {
  board.innerHTML = '';
  cells = [];
  for(let r=0; r<8; r++){
    cells[r] = [];
    for(let c=0; c<8; c++){
      const cell = document.createElement('div');
      cell.className = 'cell ' + ((r+c)%2==0?'white':'black');
      cell.dataset.row = r;
      cell.dataset.col = c;
      board.appendChild(cell);
      cells[r][c] = {el: cell, piece: null};
      
      // –†–∞—Å—Å—Ç–∞–≤–ª—è–µ–º —à–∞—à–∫–∏
      if((r+c)%2==1 && r<3){
        addPiece(r,c,'black');
      } else if((r+c)%2==1 && r>4){
        addPiece(r,c,'white');
      }
    }
  }
}

// –î–æ–±–∞–≤–∏—Ç—å —à–∞—à–∫—É
function addPiece(r,c,color){
  const piece = document.createElement('div');
  piece.className = 'piece '+color;
  piece.dataset.color=color;
  cells[r][c].piece=piece;
  cells[r][c].el.appendChild(piece);
  if(color=='white'){
    piece.addEventListener('click',()=> selectPiece(r,c));
  }
}

// –í—ã–±–æ—Ä —à–∞—à–∫–∏ –∏–≥—Ä–æ–∫–æ–º
function selectPiece(r,c){
  if(!playerTurn) return;
  if(selectedPiece) selectedPiece.classList.remove('selected');
  selectedPiece = cells[r][c].piece;
  selectedPiece.classList.add('selected');
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–æ–¥–∞
function validMove(sr,sc,tr,tc){
  if(tr<0||tr>7||tc<0||tc>7) return false;
  if(cells[tr][tc].piece) return false;
  let pieceColor = cells[sr][sc].piece.dataset.color;
  let dir = (pieceColor=='white')?-1:1;
  // –û–±—ã—á–Ω—ã–π —Ö–æ–¥
  if(tr==sr+dir && Math.abs(tc-sc)==1) return true;
  // –°—ä–µ–¥–µ–Ω–∏–µ
  if(tr==sr+2*dir && Math.abs(tc-sc)==2){
    let mr = sr+dir, mc = sc+(tc-sc)/2;
    if(cells[mr][mc].piece && cells[mr][mc].piece.dataset.color != pieceColor) return true;
  }
  return false;
}

// –°–¥–µ–ª–∞—Ç—å —Ö–æ–¥
function movePiece(sr,sc,tr,tc){
  const piece = cells[sr][sc].piece;
  cells[sr][sc].piece=null;
  cells[tr][tc].piece=piece;
  cells[sr][sc].el.innerHTML='';
  cells[tr][tc].el.appendChild(piece);
  piece.classList.remove('selected');
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—ä–µ–¥–µ–Ω–∏—è
  if(Math.abs(tr-sr)==2){
    let mr = sr + (tr-sr)/2;
    let mc = sc + (tc-sc)/2;
    let removed = cells[mr][mc].piece;
    if(removed){
      removed.remove();
      cells[mr][mc].piece=null;
    }
  }
}

// –•–æ–¥ –∏–≥—Ä–æ–∫–∞
board.addEventListener('click',e=>{
  if(!playerTurn) return;
  const target = e.target.closest('.cell');
  if(!target) return;
  let tr = parseInt(target.dataset.row);
  let tc = parseInt(target.dataset.col);
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      if(cells[r][c].piece==selectedPiece){
        if(validMove(r,c,tr,tc)){
          movePiece(r,c,tr,tc);
          selectedPiece=null;
          playerTurn=false;
          setTimeout(botMove,500);
        }
        return;
      }
    }
  }
});

// –ë–æ—Ç —Ö–æ–¥–∏—Ç —Å–ª—É—á–∞–π–Ω–æ –ø—Ä–æ—Å—Ç—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º
function botMove(){
  let moves=[];
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      let p = cells[r][c].piece;
      if(p && p.dataset.color=='black'){
        for(let dr=[1,2], dc=[-1,1,-2,2], i=0;i<dr.length;i++){
          let tr=r+dr[i];
          let tc=c+dc[i];
          if(validMove(r,c,tr,tc)) moves.push({sr:r,sc:c,tr,tc});
        }
      }
    }
  }
  if(moves.length>0){
    const m = moves[Math.floor(Math.random()*moves.length)];
    movePiece(m.sr,m.sc,m.tr,m.tc);
  }
  playerTurn=true;
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
createBoard();
</script>
</body>
</html>
