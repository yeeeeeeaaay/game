<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞–ø–∏–±–∞—Ä–∞ –∏ —à–∞—à–∫–∏</title>
<style>
body {margin:0; font-family:'Comic Sans MS', Arial; background: linear-gradient(135deg, #fff7e6 0%, #ffd966 100%); text-align:center;}
.container {width:520px; margin:20px auto; background: rgba(255 255 255 / 0.9); border-radius:20px; padding:20px; box-shadow:0 0 15px #b8860baa; position:relative; z-index:10;}
button {font-size:18px; padding:12px 30px; margin-top:15px; border:none; border-radius:12px; cursor:pointer; background:#6b4f4f; color:white; transition:0.3s;}
button:hover {background:#a47171;}
input {font-size:18px; padding:10px; border-radius:12px; border:2px solid #6b4f4f; width:60%;}
.hidden {display:none;}
#capy {width:120px; margin:10px;}
#board {display:grid; grid-template-columns: repeat(8, 50px); grid-template-rows: repeat(8, 50px); margin:20px auto; border:4px solid #6b4f4f;}
.cell {width:50px; height:50px; display:flex; align-items:center; justify-content:center; font-size:24px; cursor:pointer;}
.dark {background:#6b4f4f;}
.light {background:#fff2e6;}
#bubblesCanvas {position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999;}
</style>
</head>
<body>

<!-- –í–æ–ø—Ä–æ—Å -->
<div class="container" id="questionScreen">
  <h2>ü¶´ –¢–≤–æ—è –ª—é–±–∏–º–∫–∞?</h2>
  <img id="capy" src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" alt="–ö–∞–ø–∏–±–∞—Ä–∞">
  <br>
  <input type="text" id="answerInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
  <br>
  <button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>

  <!-- –ú—É–∑—ã–∫–∞ -->
  <iframe src="https://www.youtube.com/embed/kbEC-AGr9n0?start=13&autoplay=1&loop=1&playlist=kbEC-AGr9n0&controls=1&mute=0&modestbranding=1&rel=0" width="320" height="180" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="margin-top:10px;"></iframe>
</div>

<!-- –°–æ–æ–±—â–µ–Ω–∏–µ -->
<div class="container hidden" id="messageScreen">
  <h2 id="messageText"></h2>
</div>

<!-- –®–∞—à–∫–∏ -->
<div class="container hidden" id="checkersScreen">
  <h2>–ü–æ–π–º–∞–π —à–æ–∫–æ–ª–∞–¥–∫—É! üç´</h2>
  <div id="board"></div>
  <img id="goal" src="https://snickersni.kz/i/packs/dushnila.png" width="80" style="margin-top:10px;">
  <p style="color:#6b4f4f; font-weight:bold;">–©—ë–ª–∫–∞–π –ø–æ —Å–≤–æ–µ–π —à–∞—à–∫–µ –∏ –∑–∞—Ç–µ–º –ø–æ –ø—É—Å—Ç–æ–π –∫–ª–µ—Ç–∫–µ —á—Ç–æ–±—ã —Ö–æ–¥–∏—Ç—å. –ü–æ—Å–ª–µ —Ç–≤–æ–µ–≥–æ —Ö–æ–¥–∞ —Ö–æ–¥–∏—Ç –±–æ—Ç.</p>
</div>

<canvas id="bubblesCanvas"></canvas>

<script>
const questionScreen = document.getElementById("questionScreen");
const messageScreen  = document.getElementById("messageScreen");
const checkersScreen = document.getElementById("checkersScreen");
const messageText    = document.getElementById("messageText");
const boardDiv       = document.getElementById("board");
const goal           = document.getElementById("goal");
const bubblesCanvas  = document.getElementById("bubblesCanvas");
const ctx            = bubblesCanvas.getContext("2d");
bubblesCanvas.width = window.innerWidth;
bubblesCanvas.height = window.innerHeight;

function checkAnswer(){
  const ans = document.getElementById("answerInput").value.trim().toLowerCase();
  if(ans==="–ª–∏—Å–∞"){
    messageText.innerText="Chill üòé";
    questionScreen.classList.add("hidden");
    messageScreen.classList.remove("hidden");
    setTimeout(()=>{
      messageScreen.classList.add("hidden");
      startCheckers();
    },1500);
  } else {
    messageText.innerText="–î—É–º–∞—é, —Ç–≤–æ—è –ª—é–±–∏–º–∫–∞ —Ç–µ–±—è –Ω–µ –ø—Ä–æ—Å—Ç–∏—Ç üòÜ";
    questionScreen.classList.add("hidden");
    messageScreen.classList.remove("hidden");
  }
}

// ================= –®–∞—à–∫–∏ =================
const boardSize = 8;
let selectedCell = null;
let board = [];

function startCheckers(){
  checkersScreen.classList.remove("hidden");
  boardDiv.innerHTML="";
  board = [];
  for(let r=0;r<boardSize;r++){
    board[r]=[];
    for(let c=0;c<boardSize;c++){
      const cell = document.createElement("div");
      cell.className="cell "+((r+c)%2===0?"light":"dark");
      cell.dataset.row=r;
      cell.dataset.col=c;
      cell.addEventListener("click",()=>cellClick(r,c));
      boardDiv.appendChild(cell);
      if(r<3 && (r+c)%2===1) {cell.textContent="‚óè"; board[r][c]="player";}
      else if(r>4 && (r+c)%2===1) {cell.textContent="‚óã"; board[r][c]="bot";}
      else board[r][c]=null;
    }
  }
}

// –ö–ª–∏–∫ –ø–æ –∫–ª–µ—Ç–∫–µ
function cellClick(r,c){
  if(selectedCell){
    const [sr,sc]=selectedCell;
    if(!board[r][c] && (r+c)%2===1){
      board[r][c]=board[sr][sc];
      board[sr][sc]=null;
      selectedCell=null;
      updateBoard();
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –∏–≥—Ä–æ–∫–∞
      if(board.flat().filter(x=>x==="bot").length===0){win();}
      else setTimeout(botMove,500);
    } else selectedCell=null;
  } else {
    if(board[r][c]==="player") selectedCell=[r,c];
  }
}

function updateBoard(){
  for(let r=0;r<boardSize;r++){
    for(let c=0;c<boardSize;c++){
      const cell = boardDiv.children[r*boardSize+c];
      cell.textContent = board[r][c]==="player"?"‚óè":board[r][c]==="bot"?"‚óã":"";
    }
  }
}

// ================= –•–æ–¥ –±–æ—Ç–∞ =================
function botMove(){
  const botPieces = [];
  for(let r=0;r<boardSize;r++){
    for(let c=0;c<boardSize;c++){
      if(board[r][c]==="bot") botPieces.push([r,c]);
    }
  }
  while(botPieces.length){
    const idx=Math.floor(Math.random()*botPieces.length);
    const [r,c]=botPieces[idx];
    const moves=[[r-1,c-1],[r-1,c+1]]; // –ø—Ä–æ—Å—Ç–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö
    const validMoves = moves.filter(([nr,nc])=>nr>=0 && nc>=0 && nr<boardSize && nc<boardSize && !board[nr][nc]);
    if(validMoves.length){
      const [nr,nc]=validMoves[Math.floor(Math.random()*validMoves.length)];
      board[nr][nc]="bot";
      board[r][c]=null;
      updateBoard();
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –±–æ—Ç–∞
      if(board.flat().filter(x=>x==="player").length===0){lose();}
      break;
    } else botPieces.splice(idx,1); // –µ—Å–ª–∏ –Ω–µ—Ç —Ö–æ–¥–æ–≤, —É–¥–∞–ª—è–µ–º —à–∞—à–∫—É –∏–∑ –≤—ã–±–æ—Ä–∞
  }
}

// ================= –ü–æ–±–µ–¥–∞ =================
function win(){
  checkersScreen.classList.add("hidden");
  messageText.innerText="–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã –≤—ã–∏–≥—Ä–∞–ª –∏ —Å –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è! üéâ";
  messageScreen.classList.remove("hidden");
  createBubbles(100);
}
function lose(){
  checkersScreen.classList.add("hidden");
  messageText.innerText="–û–π! –ë–æ—Ç –ø–æ–±–µ–¥–∏–ª üò¢ –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!";
  messageScreen.classList.remove("hidden");
  createBubbles(50);
}

// ================= –ü—É–∑—ã—Ä—å–∫–∏ =================
function createBubbles(count){
  for(let i=0;i<count;i++){
    const b=document.createElement("div");
    b.className="bubble";
    const size=10+Math.random()*20;
    b.style.width=b.style.height=size+"px";
    b.style.left=Math.random()*window.innerWidth+"px";
    b.style.top=window.innerHeight+"px";
    b.style.animationDuration=(3+Math.random()*4)+"s";
    b.style.animationDelay=(Math.random()*5)+"s";
    document.body.appendChild(b);
  }
}
</script>
</body>
</html>

