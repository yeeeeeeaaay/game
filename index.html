<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –ú–æ—Ä—Å–∫–æ–π –ë–æ–π</title>
<style>
  body {
    margin:0;
    font-family: Comic Sans MS, Arial, sans-serif;
    background: linear-gradient(#87ceeb 0%, #ffe066 60%, #7CFC00 100%);
    overflow-y: auto;
    text-align: center;
    position: relative;
    min-height: 100vh;
  }

  .sun{
    position:fixed;
    top:20px;
    right:30px;
    width:120px;
    height:120px;
    background:radial-gradient(circle, #fff700, #ffb300);
    border-radius:50%;
    box-shadow:0 0 40px #ffd700;
    z-index:0;
  }

  #gameContainer{
    position:relative;
    margin: 20px auto;
    width: 550px;
    text-align:center;
    z-index:1;
    padding-bottom:50px;
  }

  table{
    border-collapse: collapse;
    margin: 10px auto;
    user-select:none;
  }

  td{
    width:50px; height:50px;
    border:1px solid #333;
    position: relative;
    cursor:pointer;
  }

  .playerCell{ background:#fff; }
  .enemyCell{ background:#000; }

  .capybara{
    width:45px; height:45px;
    position:absolute;
    top:2px; left:2px;
    pointer-events:none;
  }

  #letter{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:white;
    padding:30px 40px;
    border-radius:25px;
    font-size:22px;
    box-shadow:0 0 30px gold;
    z-index:2000;
    display:none;
  }

  .bubble{
    position:fixed;
    width:60px;
    height:60px;
    border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0.3));
    animation:floatUp 6s linear forwards;
    z-index:1500;
  }

  @keyframes floatUp{
    0%{transform:translateY(0) scale(1);opacity:1;}
    100%{transform:translateY(-800px) scale(1.5);opacity:0;}
  }

  .chocolate{
    position:fixed;
    width:70px; height:70px;
    pointer-events:none;
    transition: transform 1s ease;
    z-index:1600;
  }
</style>
</head>
<body>

<div class="sun"></div>

<div id="gameContainer">
  <h2>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –ú–æ—Ä—Å–∫–æ–π –ë–æ–π ü¶´üç´</h2>
  <table id="playerBoard"></table>
  <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –ø–æ–ª—é –≤—Ä–∞–≥–∞, —á—Ç–æ–±—ã –ø–æ–ø–∞—Å—Ç—å –≤ –∫–∞–ø–∏–±–∞—Ä—É!</p>
  <table id="enemyBoard"></table>
</div>

<div id="letter">
üíå<br><br>
–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –≤—ã–∏–≥—Ä–∞–ª!<br>
–ò —Å –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è üòè‚ú®<br><br>
–ô–µ–µ–µ–µ–µ–µ–µ–π!!!
</div>

<audio id="hitSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2b2c8c8a7b.mp3"></audio>
<audio id="winSound" src="https://cdn.pixabay.com/audio/2022/03/10/audio_8b4cbb6d44.mp3"></audio>

<script>
const playerBoard = document.getElementById("playerBoard");
const enemyBoard = document.getElementById("enemyBoard");
const hitSound = document.getElementById("hitSound");
const winSound = document.getElementById("winSound");
const letter = document.getElementById("letter");

// —Å–æ–∑–¥–∞–µ–º –¥–æ—Å–∫–∏ 10x10
function createBoard(board, isEnemy=false){
  for(let i=0;i<10;i++){
    const tr = document.createElement("tr");
    for(let j=0;j<10;j++){
      const td = document.createElement("td");
      td.dataset.row=i;
      td.dataset.col=j;
      td.className = isEnemy?'enemyCell':'playerCell';
      tr.appendChild(td);
    }
    board.appendChild(tr);
  }
}

// —Å—Ç–∞–≤–∏–º –∫–∞–ø–∏–±–∞—Ä –Ω–∞ –¥–æ—Å–∫—É
function placeCapybaras(board, count){
  const cells = [...board.querySelectorAll("td")];
  let placed=0;
  while(placed<count){
    const cell = cells[Math.floor(Math.random()*cells.length)];
    if(!cell.querySelector("img")){
      const img = document.createElement("img");
      img.src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png";
      img.className="capybara";
      cell.appendChild(img);
      placed++;
    }
  }
}

// —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏
function effects(cell){
  hitSound.play();

  // —à–æ–∫–æ–ª–∞–¥–∫–∞ –ø–∞–¥–∞–µ—Ç —Å–≤–µ—Ä—Ö—É
  const choc = document.createElement("img");
  choc.src="https://snickersni.kz/i/packs/dushnila.png";
  choc.className="chocolate";
  choc.style.left = (cell.getBoundingClientRect().left) + "px";
  choc.style.top = "-80px";
  document.body.appendChild(choc);
  // –ø–∞–¥–∞–µ–º –≤–Ω–∏–∑ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é –∫–ª–µ—Ç–∫–∏
  setTimeout(()=>{
    choc.style.transform = `translateY(${cell.getBoundingClientRect().top + 10}px)`;
  },50);
  setTimeout(()=>document.body.removeChild(choc),1200);

  // –ø—É–∑—ã—Ä—å–∫–∏
  for(let i=0;i<8;i++){
    const b = document.createElement("div");
    b.className="bubble";
    b.style.width=b.style.height = (50+Math.random()*40)+"px";
    b.style.left = (cell.getBoundingClientRect().left+Math.random()*50)+"px";
    b.style.top = (cell.getBoundingClientRect().top+Math.random()*50)+"px";
    document.body.appendChild(b);
    setTimeout(()=>document.body.removeChild(b),6000);
  }
}

// –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
function checkWin(board){
  return [...board.querySelectorAll("td img")].length===0;
}

// –ª–æ–≥–∏–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –¥–æ—Å–∫–µ –≤—Ä–∞–≥–∞
enemyBoard.addEventListener("click", e=>{
  const cell = e.target.closest("td");
  if(!cell) return;
  const img = cell.querySelector("img");
  if(img){
    cell.removeChild(img);
    effects(cell);
    if(checkWin(enemyBoard)){
      winSound.play();
      letter.style.display="block";
      // —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –ø—É–∑—ã—Ä—å–∫–∏
      for(let i=0;i<60;i++){
        const b = document.createElement("div");
        b.className="bubble";
        b.style.width=b.style.height = (50+Math.random()*40)+"px";
        b.style.left = Math.random()*window.innerWidth+"px";
        b.style.top = window.innerHeight + "px";
        document.body.appendChild(b);
        setTimeout(()=>document.body.removeChild(b),6000);
      }
    }
  } else {
    // –ø—Ä–æ–º–∞—Ö ‚Äî —Ö–æ–¥ –≤—Ä–∞–≥–∞
    enemyTurn();
  }
});

// –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –≤—Ä–∞–≥–∞
function enemyTurn(){
  const cells = [...playerBoard.querySelectorAll("td")];
  const options = cells.filter(c=>!c.dataset.hit);
  const target = options[Math.floor(Math.random()*options.length)];
  target.dataset.hit="true";
  const img = target.querySelector("img");
  if(img){
    target.removeChild(img);
    effects(target);
    if(checkWin(playerBoard)){
      alert("–í—Ä–∞–≥ –ø–æ–±–µ–¥–∏–ª!");
    }
  }
}

// —Å–æ–∑–¥–∞–µ–º –¥–æ—Å–∫–∏ –∏ –∫–∞–ø–∏–±–∞—Ä
createBoard(playerBoard,false);
createBoard(enemyBoard,true);
placeCapybaras(playerBoard,5);
placeCapybaras(enemyBoard,5);
</script>
</body>
</html>
