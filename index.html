<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –ª–∞–±–∏—Ä–∏–Ω—Ç</title>
<style>
  body {
    margin: 0;
    font-family: Comic Sans MS, Arial, sans-serif;
    background: linear-gradient(135deg, #fff7e6 0%, #ffd966 100%);
    overflow: hidden;
    user-select: none;
    text-align: center;
  }
  .container {
    width: 520px;
    margin: 20px auto;
    background: rgba(255 255 255 / 0.9);
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 0 15px #b8860baa;
    position: relative;
    z-index: 10;
  }
  h2 {
    margin-top: 0;
    color: #6b4f4f;
  }
  button {
    font-size: 18px;
    padding: 12px 30px;
    margin-top: 15px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #6b4f4f;
    color: white;
    transition: background 0.3s;
  }
  button:hover {
    background: #a47171;
  }
  input {
    font-size: 18px;
    padding: 10px;
    border-radius: 12px;
    border: 2px solid #6b4f4f;
    width: 60%;
  }
  /* YouTube –ø–æ —Ü–µ–Ω—Ç—Ä—É */
  #musicFrame {
    width: 560px;
    height: 315px;
    margin: 20px auto;
    display: block;
    border-radius: 12px;
    box-shadow: 0 0 15px #333;
  }

  /* –õ–∞–±–∏—Ä–∏–Ω—Ç */
  #maze {
    position: relative;
    width: 500px;
    height: 500px;
    margin: 20px auto 0;
    background: #a3d9a5;
    border: 5px solid #6b4f4f;
    border-radius: 15px;
    box-shadow: inset 0 0 15px #558855aa;
  }
  .wall {
    position: absolute;
    background: #6b4f4f;
    border-radius: 6px;
  }
  #goal {
    position: absolute;
    width: 120px;
    height: 40px;
    cursor: pointer;
  }
  #goal img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    user-select: none;
    pointer-events: none;
  }
  #player {
    position: absolute;
    width: 60px;
    height: 60px;
    user-select: none;
    cursor: default;
    transition: left 0.1s ease, top 0.1s ease;
  }

  /* –ü—É–∑—ã—Ä—å–∫–∏ */
  .bubble {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    box-shadow: 0 0 12px 4px rgba(255 255 255 / 0.5);
    animation: floatUp linear infinite;
    pointer-events: none;
  }
  @keyframes floatUp {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0.7;
    }
    100% {
      transform: translateY(-700px) scale(1.6);
      opacity: 0;
    }
  }

  .hidden { display: none; }

</style>
</head>
<body>

<!-- ------------------ –í–æ–ø—Ä–æ—Å ------------------ -->
<div class="container" id="questionScreen">
  <h2>ü¶´ –¢–≤–æ—è –ª—é–±–∏–º–∫–∞?</h2>
  <img src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" width="180" alt="–ö–∞–ø–∏–±–∞—Ä–∞" />
  <br />
  <input type="text" id="answerInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" autocomplete="off" />
  <br />
  <button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>

  <!-- –ú—É–∑—ã–∫–∞ –∑–¥–µ—Å—å -->
  <iframe
    id="musicFrame"
    src="https://www.youtube.com/embed/kbEC-AGr9n0?start=13&autoplay=1&loop=1&playlist=kbEC-AGr9n0&controls=0&mute=0&modestbranding=1&rel=0"
    frameborder="0"
    allow="autoplay; encrypted-media"
    allowfullscreen>
  </iframe>
</div>

<!-- ------------------ –°–æ–æ–±—â–µ–Ω–∏–µ ------------------ -->
<div class="container hidden" id="messageScreen">
  <h2 id="messageText"></h2>
</div>

<!-- ------------------ –õ–∞–±–∏—Ä–∏–Ω—Ç ------------------ -->
<div class="container hidden" id="mazeContainer">
  <h2>–ü–æ–π–º–∞–π —à–æ–∫–æ–ª–∞–¥–∫—É Snickers! üç´</h2>
  <div id="maze"></div>
  <p style="margin-top:10px; color:#6b4f4f; font-weight:bold;">–ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç—Ä–µ–ª–∫–∏</p>
</div>

<script>
  const questionScreen = document.getElementById("questionScreen");
  const messageScreen  = document.getElementById("messageScreen");
  const mazeContainer  = document.getElementById("mazeContainer");
  const messageText    = document.getElementById("messageText");
  const maze           = document.getElementById("maze");
  const answerInput    = document.getElementById("answerInput");

  // –ò–≥—Ä–æ–∫
  const player = document.createElement("img");
  player.id = "player";
  player.src = "https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png";
  player.alt = "–ö–∞–ø–∏–±–∞—Ä–∞";
  maze.appendChild(player);

  // –¶–µ–ª—å
  const goal = document.createElement("div");
  goal.id = "goal";
  const goalImg = document.createElement("img");
  goalImg.src = "https://snickersni.kz/i/packs/dushnila.png";
  goalImg.alt = "Snickers";
  goal.appendChild(goalImg);
  maze.appendChild(goal);

  // –ù–û–í–´–ô –ª–∞–±–∏—Ä–∏–Ω—Ç (–æ—Ç–∫—Ä—ã—Ç—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã)
  const wallsData = [
    {top:0,left:0,width:500,height:20},
    {top:0,left:0,width:20,height:500},
    {top:480,left:0,width:500,height:20},
    {top:0,left:480,width:20,height:500},

    {top:100,left:20,width:200,height:20},
    {top:100,left:280,width:200,height:20},
    {top:200,left:20,width:100,height:20},
    {top:200,left:160,width:100,height:20},
    {top:200,left:300,width:100,height:20},
    {top:300,left:80,width:120,height:20},
    {top:300,left:240,width:120,height:20},
    {top:400,left:20,width:460,height:20},

    {top:20,left:100,width:20,height:80},
    {top:20,left:180,width:20,height:80},
    {top:20,left:360,width:20,height:80},
    {top:120,left:60,width:20,height:80},
    {top:120,left:140,width:20,height:80},
    {top:120,left:220,width:20,height:80},
    {top:120,left:300,width:20,height:80},
    {top:120,left:380,width:20,height:80},
    {top:120,left:460,width:20,height:80},
    {top:220,left:100,width:20,height:80},
    {top:220,left:180,width:20,height:80},
    {top:220,left:260,width:20,height:80},
    {top:220,left:340,width:20,height:80},
    {top:320,left:60,width:20,height:80},
    {top:320,left:140,width:20,height:80},
    {top:320,left:220,width:20,height:80},
    {top:320,left:300,width:20,height:80},
    {top:320,left:380,width:20,height:80},
    {top:320,left:460,width:20,height:80},
  ];

  let walls = [];
  const playerSize = 60;
  let playerPos = {top: 40, left: 40};

  function checkCollision(x, y) {
    for(let w of walls) {
      let rx = parseInt(w.style.left);
      let ry = parseInt(w.style.top);
      let rw = parseInt(w.style.width);
      let rh = parseInt(w.style.height);
      if (x + playerSize > rx &&
          x < rx + rw &&
          y + playerSize > ry &&
          y < ry + rh) {
        return true;
      }
    }
    return false;
  }

  function checkWin(x, y) {
    let gx = parseInt(goal.style.left);
    let gy = parseInt(goal.style.top);
    let gw = parseInt(goal.style.width);
    let gh = parseInt(goal.style.height);
    return (x + playerSize > gx &&
            x < gx + gw &&
            y + playerSize > gy &&
            y < gy + gh);
  }

  function createBubbles(count) {
    for(let i = 0; i < count; i++) {
      const b = document.createElement("div");
      b.className = "bubble";
      b.style.width = b.style.height = (10 + Math.random()*20) + "px";
      b.style.left = Math.random()*window.innerWidth + "px";
      b.style.top = window.innerHeight + "px";
      b.style.animationDuration = (3 + Math.random()*4) + "s";
      b.style.animationDelay = (Math.random()*5) + "s";
      document.body.appendChild(b);
    }
  }

  function startMaze() {
    questionScreen.classList.add("hidden");
    messageScreen.classList.add("hidden");
    mazeContainer.classList.remove("hidden");

    walls.forEach(w => maze.removeChild(w));
    walls = [];

    for(let wdata of wallsData) {
      const w = document.createElement("div");
      w.className = "wall";
      w.style.top = wdata.top + "px";
      w.style.left = wdata.left + "px";
      w.style.width = wdata.width + "px";
      w.style.height = wdata.height + "px";  
      maze.appendChild(w);
      walls.push(w);
    }

    playerPos = {top:40,left:40};
    player.style.top = playerPos.top+"px";
    player.style.left = playerPos.left+"px";

    goal.style.top = "440px";
    goal.style.left = "380px";
  }

  function checkAnswer() {
    const ans = answerInput.value.toLowerCase().trim();
    if (ans==="–ª–∏—Å–∞") {
      messageText.innerText = "Chill üòé";
      messageScreen.classList.remove("hidden");
      questionScreen.classList.add("hidden");
      setTimeout(()=>{
        messageScreen.classList.add("hidden");
        startMaze();
      },1500);
    } else {
      messageText.innerText = "–î—É–º–∞—é, —Ç–≤–æ—è –ª—é–±–∏–º–∫–∞ —Ç–µ–±—è –Ω–µ –ø—Ä–æ—Å—Ç–∏—Ç üòÇ";
      messageScreen.classList.remove("hidden");
      questionScreen.classList.add("hidden");
    }
  }

  document.addEventListener("keydown", e=>{
    if(mazeContainer.classList.contains("hidden")) return;
    const step=10;
    let nx=playerPos.left;
    let ny=playerPos.top;
    if(e.key==="ArrowUp") ny-=step;
    else if(e.key==="ArrowDown") ny+=step;
    else if(e.key==="ArrowLeft") nx-=step;
    else if(e.key==="ArrowRight") nx+=step;

    if(nx<0) nx=0;
    if(ny<0) ny=0;
    if(nx>500-playerSize) nx=500-playerSize;
    if(ny>500-playerSize) ny=500-playerSize;

    if(!checkCollision(nx,ny)) {
      playerPos.left=nx;
      playerPos.top=ny;
      player.style.left=nx+"px";
      player.style.top=ny+"px";
    }

    if(checkWin(playerPos.left,playerPos.top)) {
      mazeContainer.classList.add("hidden");
      messageText.innerText="–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –ø—Ä–æ—à—ë–ª! –° –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è, –π–µ–µ–µ–µ–µ–µ–µ–π!";
      messageScreen.classList.remove("hidden");
      createBubbles(100);
    }
  });
</script>
</body>
</html>
