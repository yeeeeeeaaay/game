<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –ª–∞–±–∏—Ä–∏–Ω—Ç</title>
<style>
body {
  margin:0;
  overflow:hidden;
  font-family: Comic Sans MS, Arial, sans-serif;
  text-align:center;
  background: linear-gradient(to bottom, #87cefa, #fffacd); /* –Ω–µ–±–æ –∏ —Å–æ–ª–Ω—Ü–µ */
}
.hidden { display:none; }
.container {
  background: rgba(255,255,255,0.85);
  margin: 40px auto;
  padding: 25px;
  border-radius: 20px;
  width: 90%;
  max-width: 500px;
  z-index:10;
  position:relative;
}
button {
  font-size: 18px;
  padding: 12px 25px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  margin: 10px;
}
input {
  font-size: 18px;
  padding: 10px;
  border-radius: 10px;
  border: 2px solid #333;
}
#gameCanvas, #bubbleCanvas {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  display:none; /* —Å–∫—Ä—ã—Ç –ø–æ–∫–∞ –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç –ª–∞–±–∏—Ä–∏–Ω—Ç */
  z-index:0;
}
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>
<canvas id="bubbleCanvas"></canvas>

<div class="container" id="colorScreen">
  <h2>ü¶´ –ú–æ–π –ª—é–±–∏–º—ã–π —Ü–≤–µ—Ç?</h2>
  <input id="colorInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç">
  <br><br>
  <button onclick="checkColor()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
</div>

<div class="container hidden" id="messageScreen">
  <h2 id="messageText"></h2>
</div>

<script>
/* ================== –õ–æ–≥–∏–∫–∞ —Ü–≤–µ—Ç–∞ ================== */
function checkColor(){
  const val = document.getElementById("colorInput").value.toLowerCase().trim();
  const msg = document.getElementById("messageScreen");

  if(val==="—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π"){
    document.getElementById("colorScreen").classList.add("hidden");
    msg.classList.remove("hidden");
    document.getElementById("messageText").innerText = "Chill üòé";

    // –ß–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞–µ–º –ª–∞–±–∏—Ä–∏–Ω—Ç
    setTimeout(()=>{
      msg.classList.add("hidden");
      startMaze();
    }, 1500);

  } else {
    document.getElementById("colorScreen").classList.add("hidden");
    msg.classList.remove("hidden");
    document.getElementById("messageText").innerText = "–¢—ã —Å–µ—Ä—å–µ–∑–Ω–æ? –ù–∞—Å—Ç–æ–ª—å–∫–æ –ø–ª–æ—Ö–æ –º–µ–Ω—è –∑–Ω–∞–µ—à—å?";
  }
}

/* ================== –õ–∞–±–∏—Ä–∏–Ω—Ç ================== */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

let mazeDone = false;
const player = {x:50, y:50, size:40};
const goal = {x:window.innerWidth-100, y:window.innerHeight-100, size:50};
const walls = [];

// –°–ª—É—á–∞–π–Ω—ã–µ —Å—Ç–µ–Ω—ã
for(let i=0;i<15;i++){
  walls.push({
    x:Math.random()*window.innerWidth*0.8+50,
    y:Math.random()*window.innerHeight*0.8+50,
    w:Math.random()*100+50,
    h:20
  });
}

function drawPlayer(){
  ctx.fillStyle="#a0522d"; // –∫–∞–ø–∏–±–∞—Ä–∞
  ctx.fillRect(player.x, player.y, player.size, player.size);
  ctx.fillStyle="#8b0000"; // —à–æ–∫–æ–ª–∞–¥–∫–∞
  ctx.fillRect(player.x+10, player.y+10, 20, 20);
}

function drawGoal(){
  ctx.fillStyle="#ff69b4";
  ctx.fillRect(goal.x, goal.y, goal.size, goal.size);
  ctx.fillStyle="white";
  ctx.font="20px Comic Sans MS";
  ctx.fillText("üèÜ", goal.x+10, goal.y+30);
}

function drawWalls(){
  ctx.fillStyle="#228B22";
  walls.forEach(w=>{
    ctx.fillRect(w.x,w.y,w.w,w.h);
  });
}

function animateMaze(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawWalls();
  drawGoal();
  drawPlayer();

  if(checkCollision()){
    mazeDone=true;
    canvas.style.display="none";
    showCongrats();
    return;
  }

  requestAnimationFrame(animateMaze);
}

function checkCollision(){
  return player.x + player.size > goal.x &&
         player.x < goal.x + goal.size &&
         player.y + player.size > goal.y &&
         player.y < goal.y + goal.size;
}

document.addEventListener("keydown",(e)=>{
  if(!mazeDone){
    const step = 10;
    let nextX = player.x;
    let nextY = player.y;
    if(e.key==="ArrowUp") nextY-=step;
    if(e.key==="ArrowDown") nextY+=step;
    if(e.key==="ArrowLeft") nextX-=step;
    if(e.key==="ArrowRight") nextX+=step;

    let collide=false;
    walls.forEach(w=>{
      if(nextX+player.size > w.x && nextX < w.x+w.w &&
         nextY+player.size > w.y && nextY < w.y+w.h){
      collide=true;
      }
    });
    if(!collide){
      player.x = nextX;
      player.y = nextY;
    }
  }
});

/* ================== –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ + –ø—É–∑—ã—Ä—å–∫–∏ ================== */
const bubbleCanvas = document.getElementById("bubbleCanvas");
const bctx = bubbleCanvas.getContext("2d");
bubbleCanvas.width = window.innerWidth;
bubbleCanvas.height = window.innerHeight;
const bubbles=[];

function showCongrats(){
  const msg = document.getElementById("messageScreen");
  msg.classList.remove("hidden");
  document.getElementById("messageText").innerText="–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –ø—Ä–æ—à—ë–ª! –° –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è, –π–µ–µ–µ–µ–µ–µ–µ–π!";

  // –ü—É–∑—ã—Ä—å–∫–∏
  for(let i=0;i<50;i++){
    bubbles.push({
      x: Math.random()*bubbleCanvas.width,
      y: Math.random()*bubbleCanvas.height,
      r: Math.random()*20+10,
      dx: (Math.random()-0.5)*2,
      dy: -Math.random()*2
    });
  }
  animateBubbles();
}

function animateBubbles(){
  bctx.clearRect(0,0,bubbleCanvas.width,bubbleCanvas.height);
  bubbles.forEach(b=>{
    b.x += b.dx;
    b.y += b.dy;
    bctx.beginPath();
    bctx.fillStyle = "rgba(173,216,230,0.7)";
    bctx.arc(b.x,b.y,b.r,0,Math.PI*2);
    bctx.fill();
  });
  requestAnimationFrame(animateBubbles);
}

/* ================== –°—Ç–∞—Ä—Ç –ª–∞–±–∏—Ä–∏–Ω—Ç–∞ ================== */
function startMaze(){
  canvas.style.display="block";
  resizeCanvas();
  animateMaze();
}
</script>

</body>
</html>
