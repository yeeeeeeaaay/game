<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ö–∞–ø–∏–±–∞—Ä–Ω—ã–π –º–æ—Ä—Å–∫–æ–π –±–æ–π ü¶´üç´</title>

<style>
body{
  margin:0;
  font-family:Comic Sans MS, Arial;
  text-align:center;
  background:linear-gradient(#87ceeb,#ffe066);
  overflow:hidden;
}

/* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
.container{
  width:520px;
  margin:20px auto;
  background:rgba(255,255,255,.95);
  border-radius:20px;
  padding:20px;
  box-shadow:0 0 20px rgba(0,0,0,.2);
  position:relative;
  z-index:5;
}

.hidden{display:none;}

button,input{
  font-size:18px;
  padding:10px 20px;
  border-radius:12px;
  border:2px solid #6b4f4f;
}

button{
  background:#6b4f4f;
  color:white;
  cursor:pointer;
}

/* –¥–æ—Å–∫–∞ */
.board{
  display:grid;
  grid-template-columns:repeat(6,60px);
  grid-template-rows:repeat(6,60px);
  gap:6px;
  justify-content:center;
  margin:15px auto;
}

.cell{
  width:60px;
  height:60px;
  background:#7ec8ff;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.cell img{width:46px;pointer-events:none;}

.hit{background:#ff9aa2 !important;}
.miss{background:#ddd !important;}

h3{color:#6b4f4f}

/* —à–æ–∫–æ–ª–∞–¥–∫–∏ –∏ –∏—Å–∫—Ä—ã */
.choco{
  position:fixed;
  top:-60px;
  width:40px;
  animation:fall 2.5s linear forwards;
  z-index:1000;
}

.spark{
  position:fixed;
  width:8px;
  height:8px;
  background:gold;
  border-radius:50%;
  animation:spark 1.2s linear forwards;
}

@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);}
}

@keyframes spark{
  to{
    transform:translateY(120px) scale(0);
    opacity:0;
  }
}

/* –ø—É–∑—ã—Ä–∏ */
.bubble{
  position:fixed;
  bottom:-50px;
  border-radius:50%;
  background:rgba(255,255,255,.6);
  animation:float 6s linear infinite;
}

@keyframes float{
  to{transform:translateY(-120vh);opacity:0;}
}

/* —Å–æ–ª–Ω—Ü–µ */
.sun{
  position:fixed;
  top:20px;
  right:20px;
  width:120px;
  height:120px;
  background:yellow;
  border-radius:50%;
  box-shadow:0 0 40px gold;
  z-index:0;
}
</style>
</head>

<body>

<div class="sun"></div>

<!-- –í–û–ü–†–û–° -->
<div class="container" id="question">
  <h2>ü¶´ –¢–≤–æ—è –ª—é–±–∏–º–∫–∞?</h2>
  <img src="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png" width="160">
  <br><br>
  <input id="answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
  <br><br>
  <button onclick="checkAnswer()">–û—Ç–≤–µ—Ç–∏—Ç—å</button>

  <iframe width="100%" height="230"
    src="https://www.youtube.com/embed/kbEC-AGr9n0?start=13&autoplay=1&loop=1&playlist=kbEC-AGr9n0"
    allow="autoplay">
  </iframe>
</div>

<!-- –°–û–û–ë–©–ï–ù–ò–ï -->
<div class="container hidden" id="message">
  <h2 id="msgText"></h2>
</div>

<!-- –ò–ì–†–ê -->
<div class="container hidden" id="game">
  <h2>‚öì –ú–æ—Ä—Å–∫–æ–π –±–æ–π —Å –∫–∞–ø–∏–±–∞—Ä–∞–º–∏</h2>
  <h3>–¢–≤–æ–∏ –∫–∞–ø–∏–±–∞—Ä—ã</h3>
  <div class="board" id="playerBoard"></div>

  <h3>–ö–∞–ø–∏–±–∞—Ä—ã –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞</h3>
  <div class="board" id="botBoard"></div>
</div>

<script>
const SIZE=6;
const CAPY="https://png.pngtree.com/png-clipart/20240709/original/pngtree-cartoon-capybara-with-blue-suit-vector-png-image_15523170.png";
const CHOCO="https://snickersni.kz/i/packs/dushnila.png";

let player=[],bot=[];
let pAlive=3,bAlive=3;
let turn=true;

const q=document.getElementById("question");
const m=document.getElementById("message");
const msg=document.getElementById("msgText");
const g=document.getElementById("game");

function checkAnswer(){
  if(document.getElementById("answer").value.toLowerCase().trim()==="–ª–∏—Å–∞"){
    msg.innerText="Chill üòé";
    q.classList.add("hidden");
    m.classList.remove("hidden");
    setTimeout(()=>{m.classList.add("hidden");start();},1200);
  }else{
    msg.innerText="–î—É–º–∞—é, —Ç–≤–æ—è –ª—é–±–∏–º–∫–∞ —Ç–µ–±—è –Ω–µ –ø—Ä–æ—Å—Ç–∏—Ç üòÇ";
    q.classList.add("hidden");
    m.classList.remove("hidden");
  }
}

function start(){
  g.classList.remove("hidden");
  init();
}

function init(){
  const pb=document.getElementById("playerBoard");
  const bb=document.getElementById("botBoard");
  pb.innerHTML="";bb.innerHTML="";
  player=[];bot=[];
  pAlive=3;bAlive=3;turn=true;

  for(let i=0;i<36;i++){
    player[i]=false;bot[i]=false;

    const pc=document.createElement("div");
    pc.className="cell";pb.appendChild(pc);

    const bc=document.createElement("div");
    bc.className="cell";
    bc.onclick=()=>shoot(i,bc);
    bb.appendChild(bc);
  }
  place(player,pb,true);
  place(bot,bb,false);
}

function place(arr,board,show){
  let c=0;
  while(c<3){
    let i=Math.floor(Math.random()*36);
    if(!arr[i]){
      arr[i]=true;
      if(show){
        let img=document.createElement("img");
        img.src=CAPY;
        board.children[i].appendChild(img);
      }
      c++;
    }
  }
}

function shoot(i,cell){
  if(!turn||cell.classList.contains("hit")||cell.classList.contains("miss"))return;
  if(bot[i]){
    cell.classList.add("hit");
    cell.innerHTML="üç´";
    bot[i]=false;bAlive--;
    effects();
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerHTML="‚Ä¢";
    turn=false;
    setTimeout(botTurn,700);
  }
}

function botTurn(){
  let i;
  do{i=Math.floor(Math.random()*36);}
  while(
    document.getElementById("playerBoard").children[i].classList.contains("hit")||
    document.getElementById("playerBoard").children[i].classList.contains("miss")
  );
  const cell=document.getElementById("playerBoard").children[i];
  if(player[i]){
    cell.classList.add("hit");
    cell.innerHTML="üç´";
    player[i]=false;pAlive--;
    effects();
    checkEnd();
  }else{
    cell.classList.add("miss");
    cell.innerHTML="‚Ä¢";
  }
  turn=true;
}

function effects(){
  for(let i=0;i<6;i++){
    const c=document.createElement("img");
    c.src=CHOCO;
    c.className="choco";
    c.style.left=Math.random()*100+"vw";
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),3000);

    const s=document.createElement("div");
    s.className="spark";
    s.style.left=Math.random()*100+"vw";
    s.style.top="0px";
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),1500);
  }
}

function checkEnd(){
  if(bAlive===0){
    g.classList.add("hidden");
    msg.innerText="üíå –ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –≤—ã–∏–≥—Ä–∞–ª!\n–° –º–µ–Ω—è 3 –∂–µ–ª–∞–Ω–∏—è, –π–µ–µ–µ–µ–µ–µ–µ–π!";
    m.classList.remove("hidden");
    bubbles();
  }
}

function bubbles(){
  for(let i=0;i<80;i++){
    const b=document.createElement("div");
    b.className="bubble";
    let s=10+Math.random()*30;
    b.style.width=b.style.height=s+"px";
    b.style.left=Math.random()*100+"vw";
    b.style.animationDuration=4+Math.random()*4+"s";
    document.body.appendChild(b);
  }
}
</script>
</body>
</html>
